(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ff38f83a"],{"06c5":function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));n("a630"),n("fb6a"),n("b0c0"),n("d3b7"),n("ac1f"),n("00b4"),n("25f0"),n("3ca3");var r=n("6b75");function a(t,e){if(t){if("string"==typeof t)return Object(r["a"])(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Object(r["a"])(t,e):void 0}}},"2a9a":function(t,e,n){},"2cbf":function(t,e,n){"use strict";n("73e0")},"333d":function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"pagination-container",class:{hidden:t.hidden}},[n("el-pagination",t._b({attrs:{background:t.background,"current-page":t.currentPage,"page-size":t.pageSize,layout:t.layout,"page-sizes":t.pageSizes,total:t.total},on:{"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e},"update:pageSize":function(e){t.pageSize=e},"update:page-size":function(e){t.pageSize=e},"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}},"el-pagination",t.$attrs,!1))],1)},a=[];n("a9e3");Math.easeInOutQuad=function(t,e,n,r){return t/=r/2,t<1?n/2*t*t+e:(t--,-n/2*(t*(t-2)-1)+e)};var i=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}();function o(t){document.documentElement.scrollTop=t,document.body.parentNode.scrollTop=t,document.body.scrollTop=t}function s(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function u(t,e,n){var r=s(),a=t-r,u=20,l=0;e="undefined"===typeof e?500:e;var c=function(){l+=u;var t=Math.easeInOutQuad(l,r,a,e);o(t),l<e?i(c):n&&"function"===typeof n&&n()};c()}var l={name:"Pagination",props:{total:{required:!0,type:Number},page:{type:Number,default:1},limit:{type:Number,default:20},pageSizes:{type:Array,default:function(){return[10,20,30,50]}},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},background:{type:Boolean,default:!0},autoScroll:{type:Boolean,default:!0},hidden:{type:Boolean,default:!1}},computed:{currentPage:{get:function(){return this.page},set:function(t){this.$emit("update:page",t)}},pageSize:{get:function(){return this.limit},set:function(t){this.$emit("update:limit",t)}}},methods:{handleSizeChange:function(t){this.$emit("pagination",{page:this.currentPage,limit:t}),this.autoScroll&&u(0,800)},handleCurrentChange:function(t){this.$emit("pagination",{page:t,limit:this.pageSize}),this.autoScroll&&u(0,800)}}},c=l,f=(n("2cbf"),n("2877")),d=Object(f["a"])(c,r,a,!1,null,"6af373ef",null);e["a"]=d.exports},3835:function(t,e,n){"use strict";function r(t){if(Array.isArray(t))return t}n.d(e,"a",(function(){return s}));n("a4d3"),n("e01a"),n("d28b"),n("d3b7"),n("3ca3"),n("ddb0");function a(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,a,i,o,s=[],u=!0,l=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(s.push(r.value),s.length!==e);u=!0);}catch(t){l=!0,a=t}finally{try{if(!u&&null!=n["return"]&&(o=n["return"](),Object(o)!==o))return}finally{if(l)throw a}}return s}}var i=n("06c5");function o(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(t,e){return r(t)||a(t,e)||Object(i["a"])(t,e)||o()}},"4b90":function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n("3835");n("4de4"),n("4fad"),n("c1f9"),n("d3b7"),n("0643"),n("2382");function a(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=Object.fromEntries(Object.entries(n).filter((function(t){var e=Object(r["a"])(t,2),n=(e[0],e[1]);return null!=n&&""!==n})));t.push({path:e.path,query:a})}},"4e82":function(t,e,n){"use strict";var r=n("23e7"),a=n("1c0b"),i=n("7b0b"),o=n("d039"),s=n("a640"),u=[],l=u.sort,c=o((function(){u.sort(void 0)})),f=o((function(){u.sort(null)})),d=s("sort"),p=c||!f||!d;r({target:"Array",proto:!0,forced:p},{sort:function(t){return void 0===t?l.call(i(this)):l.call(i(this),a(t))}})},"4fad":function(t,e,n){var r=n("23e7"),a=n("6f53").entries;r({target:"Object",stat:!0},{entries:function(t){return a(t)}})},6724:function(t,e,n){"use strict";n("8d41");var r="@@wavesContext";function a(t,e){function n(n){var r=Object.assign({},e.value),a=Object.assign({ele:t,type:"hit",color:"rgba(0, 0, 0, 0.15)"},r),i=a.ele;if(i){i.style.position="relative",i.style.overflow="hidden";var o=i.getBoundingClientRect(),s=i.querySelector(".waves-ripple");switch(s?s.className="waves-ripple":(s=document.createElement("span"),s.className="waves-ripple",s.style.height=s.style.width=Math.max(o.width,o.height)+"px",i.appendChild(s)),a.type){case"center":s.style.top=o.height/2-s.offsetHeight/2+"px",s.style.left=o.width/2-s.offsetWidth/2+"px";break;default:s.style.top=(n.pageY-o.top-s.offsetHeight/2-document.documentElement.scrollTop||document.body.scrollTop)+"px",s.style.left=(n.pageX-o.left-s.offsetWidth/2-document.documentElement.scrollLeft||document.body.scrollLeft)+"px"}return s.style.backgroundColor=a.color,s.className="waves-ripple z-active",!1}}return t[r]?t[r].removeHandle=n:t[r]={removeHandle:n},n}var i={bind:function(t,e){t.addEventListener("click",a(t,e),!1)},update:function(t,e){t.removeEventListener("click",t[r].removeHandle,!1),t.addEventListener("click",a(t,e),!1)},unbind:function(t){t.removeEventListener("click",t[r].removeHandle,!1),t[r]=null,delete t[r]}},o=function(t){t.directive("waves",i)};window.Vue&&(window.waves=i,Vue.use(o)),i.install=o;e["a"]=i},"6b75":function(t,e,n){"use strict";function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}n.d(e,"a",(function(){return r}))},"6f53":function(t,e,n){var r=n("83ab"),a=n("df75"),i=n("fc6a"),o=n("d1e7").f,s=function(t){return function(e){var n,s=i(e),u=a(s),l=u.length,c=0,f=[];while(l>c)n=u[c++],r&&!o.call(s,n)||f.push(t?[n,s[n]]:s[n]);return f}};t.exports={entries:s(!0),values:s(!1)}},7179:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("div",{staticClass:"filter-container",staticStyle:{"margin-bottom":"10px"}},[n("el-input",{staticClass:"filter-item",attrs:{type:"number",placeholder:"ID"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleSearch(e)}},model:{value:t.listQuery.id,callback:function(e){t.$set(t.listQuery,"id",e)},expression:"listQuery.id"}}),n("el-input",{staticClass:"filter-item",attrs:{placeholder:"Name"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleSearch(e)}},model:{value:t.listQuery.name,callback:function(e){t.$set(t.listQuery,"name",e)},expression:"listQuery.name"}}),n("el-select",{staticClass:"filter-item",attrs:{placeholder:"Status",clearable:""},model:{value:t.listQuery.status,callback:function(e){t.$set(t.listQuery,"status",e)},expression:"listQuery.status"}},t._l(t.statusList,(function(t){return n("el-option",{key:t.name,attrs:{label:t.name,value:t.name}})})),1),n("el-select",{staticClass:"filter-item",attrs:{placeholder:"Type",clearable:""},model:{value:t.listQuery.type,callback:function(e){t.$set(t.listQuery,"type",e)},expression:"listQuery.type"}},t._l(t.typeList,(function(t){return n("el-option",{key:t.name,attrs:{label:t.name,value:t.name}})})),1),n("el-select",{staticClass:"filter-item",attrs:{placeholder:"Tag",clearable:""},model:{value:t.listQuery.tag,callback:function(e){t.$set(t.listQuery,"tag",e)},expression:"listQuery.tag"}},t._l(t.tagList,(function(t){return n("el-option",{key:t.id,attrs:{label:t.name,value:t.code}})})),1),n("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(e){return e.stopPropagation(),t.handleSearch(e)}}},[t._v(" Search ")]),n("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:function(e){return e.stopPropagation(),t.handleCreate(e)}}},[t._v(" Create ")])],1),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],key:t.tableKey,staticStyle:{width:"100%"},attrs:{data:t.list,border:"",fit:"","highlight-current-row":""},on:{"sort-change":t.sortChange}},[n("el-table-column",{attrs:{label:"ID",prop:"id",sortable:"custom",align:"center",width:"80","class-name":t.getSortClass("id")},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[n("span",[t._v(t._s(r.id))])]}}])}),n("el-table-column",{attrs:{label:"Code",width:"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[n("span",[t._v(t._s(r.code))])]}}])}),n("el-table-column",{attrs:{label:"Name","min-width":"150",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[n("router-link",{staticClass:"link-type",attrs:{to:t.getRoutePath(r)}},[t._v(t._s(r.name))])]}}])}),n("el-table-column",{attrs:{label:"Description","min-width":"200",align:"left"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[n("span",[t._v(t._s(r.description))])]}}])}),n("el-table-column",{attrs:{label:"Crontab","min-width":"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[n("span",[t._v(t._s(r.cronExpr))])]}}])}),n("el-table-column",{attrs:{label:"Tag","min-width":"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[n("span",[t._v(t._s(r.tags))])]}}])}),n("el-table-column",{attrs:{label:"Status",width:"120",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[n("el-tag",{attrs:{type:t._f("statusFilter")(r.status)}},[t._v(" "+t._s(r.status)+" ")])]}}])}),n("el-table-column",{attrs:{label:"Notify",width:"120",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[t._v(" "+t._s(n.alerts?n.alerts.map((function(t){return t.alertId})):"")+" ")]}}])}),n("el-table-column",{attrs:{label:"Update Time","min-width":"130",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[t._v(" "+t._s(n.updateTime)+" ")]}}])}),n("el-table-column",{attrs:{label:"Create Time","min-width":"130",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[t._v(" "+t._s(n.createTime)+" ")]}}])}),n("el-table-column",{attrs:{label:"Actions",align:"center",width:"230","class-name":"small-padding fixed-width"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row,a=e.$index;return[n("el-button",{attrs:{type:"primary",size:"mini",disabled:"SCHEDULING"===r.status},on:{click:function(e){return t.handleUpdate(r)}}},[t._v(" Edit ")]),n("el-dropdown",{staticStyle:{margin:"0 10px"},attrs:{trigger:"click"},on:{command:t.handleMore}},[n("el-button",{attrs:{size:"mini",type:"success"}},[t._v(" Action ")]),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{attrs:{command:{row:r,toStatus:"ALERT"}}},[t._v("Edit Alert")]),n("el-dropdown-item",{attrs:{command:{row:r,toStatus:"TAG"}}},[t._v("Edit Tag")]),n("el-dropdown-item",{attrs:{command:{row:r,toStatus:"COPY"}}},[t._v("Copy Workflow")]),"JOB_FLOW"===r.type&&"ONLINE"===r.status?n("el-dropdown-item",{attrs:{command:{row:r,toStatus:"SCHEDULING"}}},[t._v("Scheduling")]):t._e(),"SCHEDULING"===r.status?n("el-dropdown-item",{attrs:{command:{row:r,toStatus:"STOP_SCHED"}}},[t._v("Stop Sched")]):t._e(),"OFFLINE"===r.status?n("el-dropdown-item",{attrs:{command:{row:r,toStatus:"ONLINE"}}},[t._v("Online")]):t._e(),"ONLINE"===r.status?n("el-dropdown-item",{attrs:{command:{row:r,toStatus:"OFFLINE"}}},[t._v("Offline")]):t._e(),!r.workflow||"ONLINE"!==r.status&&"SCHEDULING"!==r.status?t._e():n("el-dropdown-item",{attrs:{command:{row:r,toStatus:"RUN_ONCE"}}},[t._v("Run Once")])],1)],1),"DELETE"!==r.status?n("el-button",{attrs:{size:"mini",type:"danger",disabled:"SCHEDULING"===r.status},on:{click:function(e){return t.handleDelete(r,a)}}},[t._v(" Delete ")]):t._e(),"DELETE"===r.status?n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(e){return t.handlePurge(r,a)}}},[t._v(" Purge ")]):t._e()]}}])})],1),n("pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total > 0"}],attrs:{total:t.total,page:t.listQuery.page,limit:t.listQuery.size},on:{"update:page":function(e){return t.$set(t.listQuery,"page",e)},"update:limit":function(e){return t.$set(t.listQuery,"size",e)},pagination:t.getList}}),n("ProjectCreateDialog",{ref:"createDialog",on:{refreshList:t.getList}}),n("ScheduleDialog",{ref:"scheduleDialog",on:{refreshList:t.getList}}),n("EditAlertDialog",{ref:"editAlertDialog"}),n("EditTagDialog",{ref:"editTagDialog"})],1)},a=[],i=n("5530"),o=n("c7eb"),s=n("1da1"),u=(n("99af"),n("4e82"),n("a434"),n("b0c0"),n("7647")),l=n("7fbc"),c=n("d28d"),f=n("4b90"),d=n("6724"),p=n("333d"),m=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-dialog",{attrs:{title:"Edit Project","show-close":!1,"close-on-click-modal":!1,"close-on-press-escape":!1,visible:t.visible},on:{"update:visible":function(e){t.visible=e}}},[n("el-form",{ref:"formData",attrs:{model:t.formData,rules:t.formRules}},[n("el-form-item",{attrs:{label:"Project Name",prop:"name","label-width":t.labelWidth}},[n("el-input",{staticStyle:{width:"90%"},model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData.name"}})],1),n("el-form-item",{attrs:{label:"Project Type",prop:"type","label-width":t.labelWidth}},[n("el-select",{staticStyle:{width:"90%"},attrs:{placeholder:"workflow type"},model:{value:t.formData.type,callback:function(e){t.$set(t.formData,"type",e)},expression:"formData.type"}},t._l(t.jobFlowTypes,(function(t){return n("el-option",{key:t.name,attrs:{label:t.name,value:t.name}})})),1)],1),"JOB_FLOW"===t.formData.type?[n("el-form-item",{attrs:{label:"Crontab",prop:"cronExpr","label-width":t.labelWidth}},[n("el-input",{staticStyle:{width:"90%"},model:{value:t.formData.cronExpr,callback:function(e){t.$set(t.formData,"cronExpr",e)},expression:"formData.cronExpr"}})],1)]:t._e(),"JOB_FLOW"===t.formData.type||"SUB_FLOW"===t.formData.type?[n("el-form-item",{attrs:{label:"Parallel Tasks",prop:"parallelism","label-width":t.labelWidth}},[n("el-input",{staticStyle:{width:"90%"},attrs:{type:"number",min:"1"},model:{value:t.formData.config.parallelism,callback:function(e){t.$set(t.formData.config,"parallelism",e)},expression:"formData.config.parallelism"}})],1),n("el-form-item",{attrs:{label:"Timeout",prop:"timeout","label-width":t.labelWidth}},[n("el-switch",{staticStyle:{width:"6%"},model:{value:t.formData.timeout.enable,callback:function(e){t.$set(t.formData.timeout,"enable",e)},expression:"formData.timeout.enable"}}),n("el-select",{staticStyle:{width:"40%","margin-left":"2%"},attrs:{placeholder:"timeout strategies",multiple:"",clearable:""},model:{value:t.formData.timeout.strategies,callback:function(e){t.$set(t.formData.timeout,"strategies",e)},expression:"formData.timeout.strategies"}},t._l(t.timeoutStrategies,(function(t){return n("el-option",{key:t.name,attrs:{label:t.name,value:t.name}})})),1),n("el-input",{staticStyle:{width:"40%","margin-left":"2%"},attrs:{placeholder:"Unit: s sec, m min, h hour, d day"},model:{value:t.formData.timeout.threshold,callback:function(e){t.$set(t.formData.timeout,"threshold",e)},expression:"formData.timeout.threshold"}})],1)]:t._e(),n("el-form-item",{attrs:{label:"Description",prop:"description","label-width":t.labelWidth}},[n("el-input",{staticStyle:{width:"90%"},attrs:{type:"textarea",autosize:{minRows:2,maxRows:4}},model:{value:t.formData.description,callback:function(e){t.$set(t.formData,"description",e)},expression:"formData.description"}})],1)],2),t.cronList&&t.cronList.length>0?n("el-table",{staticStyle:{width:"90%","padding-left":"120px"},attrs:{data:t.cronList}},[n("el-table-column",{attrs:{label:"Execution Time",align:"left"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[n("span",[t._v(t._s(r))])]}}],null,!1,2564006570)})],1):t._e(),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){return e.stopPropagation(),t.cancelForm()}}},[t._v("Cancel")]),t.formData.type&&"JOB_FLOW"===t.formData.type?[n("el-button",{attrs:{type:"warning"},on:{click:function(e){return e.stopPropagation(),t.getCrontab()}}},[t._v("CronTab")]),n("el-button",{attrs:{type:"success"},on:{click:function(e){return e.stopPropagation(),t.enterJobFlow()}}},[t._v("Edit Workflow")])]:t._e(),n("el-button",{attrs:{type:"primary"},on:{click:function(e){return e.stopPropagation(),t.submitForm()}}},[t._v("Confirm")])],2)],1)},h=[],b=(n("a4d3"),n("e01a"),{name:"ProjectCreateDialog",data:function(){return{visible:!1,labelWidth:"120px",timeoutStrategies:[],jobFlowTypes:[],cronList:[],formData:{timeout:{enable:!1},config:{}},formRules:{name:[{required:!0,message:"Please enter name",trigger:"blur"}],type:[{required:!0,message:"Please select workflow type",trigger:"blur"}]}}},methods:{init:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.resetForm(),this.getTimeoutStrategies(),this.getJobFlowTypes(),this.visible=!0;var e=t.id,n=t.name,r=t.type,a=t.cronExpr,i=t.description,o=t.timeout,s=t.config;o||(o={enable:!1}),s||(s={}),this.formData={id:e,name:n,type:r,cronExpr:a,description:i,timeout:o,config:s}},getTimeoutStrategies:function(){var t=this,e={className:"TimeoutStrategy"};Object(l["g"])(e).then((function(e){t.timeoutStrategies=e}))},getJobFlowTypes:function(){var t=this,e={className:"JobFlowType"};Object(l["g"])(e).then((function(e){t.jobFlowTypes=e}))},getCrontab:function(){var t=this;Object(u["h"])({cron:this.formData.cronExpr}).then((function(e){t.cronList=e}))},submitForm:function(){var t=this;this.formData.id?Object(u["m"])(this.formData).then((function(e){t.visible=!1,t.$emit("refreshList")})):this.$refs.formData.validate((function(e){if(!e)return!1;Object(u["b"])(t.formData).then((function(e){t.visible=!1,t.$emit("refreshList")}))}))},enterJobFlow:function(){var t=this.formData.id;t&&(this.visible=!1,this.$router.push("/project/flow/edit/".concat(t)))},cancelForm:function(){this.visible=!1,this.resetForm()},resetForm:function(){this.$refs.formData?(this.$refs.formData.clearValidate(),this.$refs.formData.resetFields()):this.formData={timeout:{enable:!1},config:{}}}}}),g=b,v=n("2877"),y=Object(v["a"])(g,m,h,!1,null,null,null),w=y.exports,O=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-dialog",{attrs:{title:"Scheduling",width:"30%","destroy-on-close":!0,visible:t.visible},on:{"update:visible":function(e){t.visible=e}}},[n("el-form",{attrs:{disabled:!0}},[n("el-form-item",{attrs:{label:"CronTab",prop:"cronExpr","label-width":t.labelWidth}},[n("el-input",{staticStyle:{width:"90%"},model:{value:t.row.cronExpr,callback:function(e){t.$set(t.row,"cronExpr",e)},expression:"row.cronExpr"}})],1)],1),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){return t.closeForm()}}},[t._v("Cancel")]),n("el-button",{attrs:{type:"warning"},on:{click:function(e){return e.stopPropagation(),t.getCrontab()}}},[t._v("CronTab")]),n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitForm()}}},[t._v(" Confirm ")]),t.cronList&&t.cronList.length>0?n("el-table",{attrs:{data:t.cronList}},[n("el-table-column",{attrs:{label:"Execution Time",align:"left"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[n("span",[t._v(t._s(r))])]}}],null,!1,145018682)})],1):t._e()],1)],1)},j=[],D={name:"ScheduleDialog",data:function(){return{visible:!1,labelWidth:"100px",listStatus:[],row:{},cronList:[]}},created:function(){this.getStatus()},methods:{init:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.row=t,this.cronList=[],this.visible=!0},getStatus:function(){var t=this,e={className:"JobFlowStatus"};Object(l["g"])(e).then((function(e){t.listStatus=e}))},getCrontab:function(){var t=this;Object(u["h"])({cron:this.row.cronExpr}).then((function(e){t.cronList=e}))},submitForm:function(){var t=this;return Object(s["a"])(Object(o["a"])().mark((function e(){return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(u["k"])(t.row.id).then((function(e){t.$message.success("Scheduled Successfully, id=".concat(e)),t.closeForm(),t.$emit("refreshList")}));case 2:case"end":return e.stop()}}),e)})))()},closeForm:function(){this.visible=!1}}},S=D,_=Object(v["a"])(S,O,j,!1,null,null,null),k=_.exports,x=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-dialog",{attrs:{title:"Alert Configuration",visible:t.visible},on:{"update:visible":function(e){t.visible=e}}},[n("el-form",{attrs:{model:t.formData,rules:t.formRules}},[t._l(t.formData.alerts,(function(e,r){return[n("el-row",{key:"r"+r,attrs:{gutter:20}},[n("el-col",{attrs:{span:10}},[n("el-form-item",{attrs:{label:"Alert"+r,prop:"alerts."+r+".alertId","label-width":"100px"}},[n("el-select",{staticStyle:{width:"100%"},model:{value:e.alertId,callback:function(n){t.$set(e,"alertId",n)},expression:"rowItem.alertId"}},t._l(t.alertList,(function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}},[n("span",{staticStyle:{float:"left"}},[t._v(t._s(e.name))])])})),1)],1)],1),n("el-col",{attrs:{span:10}},[n("el-form-item",{attrs:{prop:"alerts."+r+".statuses"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{multiple:""},model:{value:e.statuses,callback:function(n){t.$set(e,"statuses",n)},expression:"rowItem.statuses"}},t._l(t.statusList,(function(e){return n("el-option",{key:e.name,attrs:{label:e.name,value:e.name}},[n("span",{staticStyle:{float:"left"}},[t._v(t._s(e.name))])])})),1)],1)],1),n("el-col",{attrs:{span:1}},[n("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(n){return n.preventDefault(),t.deleteAlert(e)}}})],1)],1)]})),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:22}},[n("el-form-item",{staticStyle:{"text-align":"right"}},[n("el-button",{on:{click:function(e){return e.stopPropagation(),t.cancelForm(e)}}},[t._v("Cancel")]),n("el-button",{attrs:{type:"success"},on:{click:function(e){return e.stopPropagation(),t.addAlert(e)}}},[t._v("Add One")]),n("el-button",{attrs:{type:"primary"},on:{click:function(e){return e.stopPropagation(),t.submitForm(e)}}},[t._v("Confirm")])],1)],1)],1)],2)],1)},L=[],E=n("a81a"),C={name:"EditAlertDialog",data:function(){return{visible:!1,row:{},formData:{},alertList:[],statusList:[],formRules:{}}},methods:{init:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.resetForm(),this.initAlertList(),this.initStatusList(),this.row=t;var e=t.id,n=t.alerts;this.formData={id:e,alerts:n},this.visible=!0},initAlertList:function(){var t=this;Object(E["d"])().then((function(e){t.alertList=e}))},initStatusList:function(){var t=this,e={className:"ExecutionStatus"};Object(l["g"])(e).then((function(e){t.statusList=e}))},addAlert:function(){this.formData.alerts||(this.formData.alerts=[]),this.formData.alerts.push({alertId:null,statuses:[]})},deleteAlert:function(t){var e=this.formData.alerts.indexOf(t);-1!==e&&this.formData.alerts.splice(e,1)},submitForm:function(){var t=this;Object(u["m"])(this.formData).then((function(e){t.row.alerts=t.formData.alerts,t.cancelForm()}))},cancelForm:function(){this.visible=!1,this.resetForm()},resetForm:function(){this.$refs.formData?(this.$refs.formData.clearValidate(),this.$refs.formData.resetFields()):this.formData={}}}},F=C,T=Object(v["a"])(F,x,L,!1,null,null,null),$=T.exports,N=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-dialog",{attrs:{title:"Tag Configuration",visible:t.visible,width:"40%"},on:{"update:visible":function(e){t.visible=e}}},[n("el-form",{attrs:{model:t.formData}},[n("el-form-item",[n("el-select",{staticStyle:{width:"100%"},attrs:{multiple:""},model:{value:t.formData.tags,callback:function(e){t.$set(t.formData,"tags",e)},expression:"formData.tags"}},t._l(t.tagList,(function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.code}},[n("span",{staticStyle:{float:"left"}},[t._v(t._s(e.name))])])})),1)],1),n("el-form-item",{staticStyle:{"text-align":"right"}},[n("el-button",{on:{click:function(e){return e.stopPropagation(),t.cancelForm()}}},[t._v("Cancel")]),n("el-button",{attrs:{type:"primary"},on:{click:function(e){return e.stopPropagation(),t.submitForm()}}},[t._v("Confirm")])],1)],1)],1)},P=[],A={name:"EditTagDialog",data:function(){return{visible:!1,row:{},formData:{},tagList:[]}},methods:{init:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.row=e;var n=e.id,r=e.tags;this.formData={id:n,tags:r},Object(c["d"])().then((function(e){t.tagList=e,t.visible=!0}))},submitForm:function(){var t=this;Object(u["m"])(this.formData).then((function(e){t.row.tags=t.formData.tags,t.cancelForm()}))},cancelForm:function(){this.visible=!1,this.resetForm()},resetForm:function(){this.formData={}}}},I=A,Q=Object(v["a"])(I,N,P,!1,null,null,null),z=Q.exports,R={name:"ProjectList",components:{Pagination:p["a"],ProjectCreateDialog:w,ScheduleDialog:k,EditAlertDialog:$,EditTagDialog:z},directives:{waves:d["a"]},filters:{statusFilter:function(t){var e={OFFLINE:"info",ONLINE:"",SCHEDULING:"success",DELETE:"danger"};return e[t]}},data:function(){return{statusList:[],tagList:[],typeList:[],tableKey:0,list:null,total:0,listLoading:!0,listQuery:this.getDefaultQuery()}},watch:{"$route.query":{handler:"updateQueryAndGetList",immediate:!1}},created:function(){var t=this;return Object(s["a"])(Object(o["a"])().mark((function e(){return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getStatus();case 2:return e.next=4,t.getTags();case 4:return e.next=6,t.getTypes();case 6:t.updateQueryAndGetList();case 7:case"end":return e.stop()}}),e)})))()},methods:{getTags:function(){var t=this;Object(c["d"])().then((function(e){t.tagList=e}))},getTypes:function(){var t=this,e={className:"JobFlowType"};Object(l["g"])(e).then((function(e){t.typeList=e}))},getStatus:function(){var t=this,e={className:"JobFlowStatus"};Object(l["g"])(e).then((function(e){t.statusList=e}))},getList:function(){var t=this;this.listLoading=!0,Object(u["e"])(this.listQuery).then((function(e){t.list=e.records,t.total=e.total,setTimeout((function(){t.listLoading=!1}),200)}))},getRoutePath:function(t){return"JOB_LIST"===t.type?"/project/list/"+t.id:("SCHEDULING"===t.status?"/project/flow/show/":"/project/flow/edit/")+t.id},handleSearch:function(){this.listQuery.page=1,Object(f["a"])(this.$router,this.$route,this.listQuery)},handleMore:function(t){var e=this;return Object(s["a"])(Object(o["a"])().mark((function n(){var r,a,i;return Object(o["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=t.row,a=t.toStatus,"ALERT"!==a){n.next=4;break}return e.$refs.editAlertDialog.init(r),n.abrupt("return");case 4:if("TAG"!==a){n.next=7;break}return e.$refs.editTagDialog.init(r),n.abrupt("return");case 7:if("COPY"!==a){n.next=10;break}return Object(u["a"])(r.id).then((function(t){e.getList()})),n.abrupt("return");case 10:if("DELETE_FLOW"!==a){n.next=12;break}return n.abrupt("return");case 12:if(a!==r.status){n.next=14;break}return n.abrupt("return");case 14:"SCHEDULING"===a?e.$refs.scheduleDialog.init(r):"STOP_SCHED"===a?Object(u["l"])(r.id).then((function(t){e.getList()})):"RUN_ONCE"===a?Object(u["j"])(r.id).then((function(t){e.$message({message:"Run once Successfully, id="+t,type:"success"})})):(i={id:r.id,status:a},Object(u["m"])(i).then((function(t){r.status=a})));case 15:case"end":return n.stop()}}),n)})))()},sortChange:function(t){var e=t.prop,n=t.order;"id"===e&&this.sortByID(n)},sortByID:function(t){this.listQuery.sort="ascending"===t?"+id":"-id",this.handleSearch()},handleCreate:function(){this.$refs.createDialog.init()},handleUpdate:function(t){var e=Object.assign({},t);this.$refs.createDialog.init(e)},handleDelete:function(t,e){var n=this;this.$confirm("Delete project [".concat(t.id,", ").concat(t.name,"] ?"),"Warning",{confirmButtonText:"Confirm",cancelButtonText:"Cancel",type:"warning"}).then((function(){Object(u["m"])({id:t.id,status:"DELETE"}).then((function(t){n.$message({message:"Delete successfully, id="+t,type:"success"}),n.list.splice(e,1)}))}))},handlePurge:function(t,e){var n=this;this.$confirm("Purge project [".concat(t.id,", ").concat(t.name,"] ?"),"Warning",{confirmButtonText:"Confirm",cancelButtonText:"Cancel",type:"warning"}).then((function(){Object(u["i"])(t.id).then((function(t){n.$message({message:"Purge forever successfully, id="+t,type:"success"}),n.list.splice(e,1)}))}))},getSortClass:function(t){var e=this.listQuery.sort;return e==="+".concat(t)?"ascending":"descending"},updateQueryAndGetList:function(){this.initListQuery(),this.getList()},initListQuery:function(){var t=this.$route.query;t&&(this.listQuery=Object(i["a"])(Object(i["a"])(Object(i["a"])({},this.getDefaultQuery()),t),{},{page:parseInt(t.page)||1,size:parseInt(t.size)||20}))},getDefaultQuery:function(){return{page:1,size:20,id:null,name:void 0,type:void 0,status:void 0,sort:"-id"}}}},W=R,B=(n("d545"),Object(v["a"])(W,r,a,!1,null,"2ff6e147",null));e["default"]=B.exports},"73e0":function(t,e,n){},7647:function(t,e,n){"use strict";n.d(e,"e",(function(){return o})),n.d(e,"c",(function(){return s})),n.d(e,"b",(function(){return c})),n.d(e,"m",(function(){return f})),n.d(e,"o",(function(){return p})),n.d(e,"i",(function(){return h})),n.d(e,"a",(function(){return b})),n.d(e,"j",(function(){return g})),n.d(e,"l",(function(){return v})),n.d(e,"k",(function(){return y})),n.d(e,"f",(function(){return w})),n.d(e,"n",(function(){return D})),n.d(e,"d",(function(){return _})),n.d(e,"g",(function(){return x})),n.d(e,"h",(function(){return L}));var r=n("c7eb"),a=n("1da1"),i=n("b775");function o(t){return Object(i["a"])({url:"/jobFlow/page",method:"get",params:t}).then((function(t){return t.data}))}function s(t){return Object(i["a"])({url:"/jobFlow/idNameMapList",method:"get",params:t}).then((function(t){return t.data}))}function u(t){return l.apply(this,arguments)}function l(){return l=Object(a["a"])(Object(r["a"])().mark((function t(e){return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(i["a"])({url:"/jobFlow/get/".concat(e),method:"get"}).then((function(t){return t.data})));case 1:case"end":return t.stop()}}),t)}))),l.apply(this,arguments)}function c(t){return Object(i["a"])({url:"/jobFlow/create",method:"post",data:t}).then((function(t){return t.data}))}function f(t){return d.apply(this,arguments)}function d(){return d=Object(a["a"])(Object(r["a"])().mark((function t(e){return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(i["a"])({url:"/jobFlow/update",method:"post",data:e}).then((function(t){return t.data})));case 1:case"end":return t.stop()}}),t)}))),d.apply(this,arguments)}function p(t){return m.apply(this,arguments)}function m(){return m=Object(a["a"])(Object(r["a"])().mark((function t(e){return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(i["a"])({url:"/jobFlow/updateFlow",method:"post",data:e}).then((function(t){return t.data})));case 1:case"end":return t.stop()}}),t)}))),m.apply(this,arguments)}function h(t){return Object(i["a"])({url:"/jobFlow/purge/".concat(t),method:"get"}).then((function(t){return t.data}))}function b(t){return Object(i["a"])({url:"/jobFlow/copy/".concat(t),method:"get"}).then((function(t){return t.data}))}function g(t,e){return Object(i["a"])({url:"/jobFlow/schedule/runOnce/".concat(t),method:"post",data:e}).then((function(t){return t.data}))}function v(t){return Object(i["a"])({url:"/jobFlow/schedule/stop/".concat(t),method:"get"}).then((function(t){return t.data}))}function y(t){return Object(i["a"])({url:"/jobFlow/schedule/start/".concat(t),method:"get"}).then((function(t){return t.data}))}function w(t){return Object(i["a"])({url:"/jobFlowRun/page",method:"get",params:t}).then((function(t){return t.data}))}function O(t){return j.apply(this,arguments)}function j(){return j=Object(a["a"])(Object(r["a"])().mark((function t(e){return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(i["a"])({url:"/jobFlowRun/get/".concat(e),method:"get"}).then((function(t){return t.data})));case 1:case"end":return t.stop()}}),t)}))),j.apply(this,arguments)}function D(t){return S.apply(this,arguments)}function S(){return S=Object(a["a"])(Object(r["a"])().mark((function t(e){return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(i["a"])({url:"/jobFlowRun/update",method:"post",data:e}).then((function(t){return t.data})));case 1:case"end":return t.stop()}}),t)}))),S.apply(this,arguments)}function _(t,e){return k.apply(this,arguments)}function k(){return k=Object(a["a"])(Object(r["a"])().mark((function t(e,n){return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return","instance"!==n?u(e):O(e));case 1:case"end":return t.stop()}}),t)}))),k.apply(this,arguments)}function x(t){return Object(i["a"])({url:"/jobFlowRun/kill/".concat(t),method:"get"}).then((function(t){return t.data}))}function L(t){return Object(i["a"])({url:"/quartz/parseExpr",method:"get",params:t}).then((function(t){return t.data}))}},"7fbc":function(t,e,n){"use strict";n.d(e,"c",(function(){return o})),n.d(e,"e",(function(){return s})),n.d(e,"d",(function(){return u})),n.d(e,"b",(function(){return c})),n.d(e,"g",(function(){return f})),n.d(e,"h",(function(){return d})),n.d(e,"f",(function(){return p})),n.d(e,"a",(function(){return m}));var r=n("c7eb"),a=n("1da1"),i=n("b775");function o(t){return Object(i["a"])({url:"/attr/edgeStates?jobId=".concat(t),method:"get"}).then((function(t){return t.data}))}function s(t){return Object(i["a"])({url:"/attr/nodeTypes?type=".concat(t),method:"get"}).then((function(t){return t.data}))}function u(t){return l.apply(this,arguments)}function l(){return l=Object(a["a"])(Object(r["a"])().mark((function t(e){return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(i["a"])({url:"/attr/nodeClassification?jobType=".concat(e),method:"get"}).then((function(t){return t.data}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),l.apply(this,arguments)}function c(t){return Object(i["a"])({url:"/attr/deployModes?type=".concat(t),method:"get"}).then((function(t){return t.data}))}function f(t){return Object(i["a"])({url:"/attr/enums",method:"get",params:t}).then((function(t){return t.data}))}function d(t){return Object(i["a"])({url:"/attr/versions?type=".concat(t),method:"get"}).then((function(t){return t.data}))}function p(){return Object(i["a"])({url:"/attr/preconditions",method:"get"}).then((function(t){return t.data}))}function m(){return Object(i["a"])({url:"/attr/dependentRelations",method:"get"}).then((function(t){return t.data}))}},"8d41":function(t,e,n){},a434:function(t,e,n){"use strict";var r=n("23e7"),a=n("23cb"),i=n("a691"),o=n("50c4"),s=n("7b0b"),u=n("65f0"),l=n("8418"),c=n("1dde"),f=n("ae40"),d=c("splice"),p=f("splice",{ACCESSORS:!0,0:0,1:2}),m=Math.max,h=Math.min,b=9007199254740991,g="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!d||!p},{splice:function(t,e){var n,r,c,f,d,p,v=s(this),y=o(v.length),w=a(t,y),O=arguments.length;if(0===O?n=r=0:1===O?(n=0,r=y-w):(n=O-2,r=h(m(i(e),0),y-w)),y+n-r>b)throw TypeError(g);for(c=u(v,r),f=0;f<r;f++)d=w+f,d in v&&l(c,f,v[d]);if(c.length=r,n<r){for(f=w;f<y-r;f++)d=f+r,p=f+n,d in v?v[p]=v[d]:delete v[p];for(f=y;f>y-r+n;f--)delete v[f-1]}else if(n>r)for(f=y-r;f>w;f--)d=f+r-1,p=f+n-1,d in v?v[p]=v[d]:delete v[p];for(f=0;f<n;f++)v[f+w]=arguments[f+2];return v.length=y-r+n,c}})},a81a:function(t,e,n){"use strict";n.d(e,"c",(function(){return a})),n.d(e,"e",(function(){return i})),n.d(e,"d",(function(){return o})),n.d(e,"a",(function(){return s})),n.d(e,"f",(function(){return u})),n.d(e,"b",(function(){return l}));var r=n("b775");function a(t){return Object(r["a"])({url:"/alert/get/".concat(t),method:"get"}).then((function(t){return t.data}))}function i(t){return Object(r["a"])({url:"/alert/page",method:"get",params:t}).then((function(t){return t.data}))}function o(){return Object(r["a"])({url:"/alert/list",method:"get"}).then((function(t){return t.data}))}function s(t){return Object(r["a"])({url:"/alert/create",method:"post",data:t}).then((function(t){return t.data}))}function u(t){return Object(r["a"])({url:"/alert/update",method:"post",data:t}).then((function(t){return t.data}))}function l(t){return Object(r["a"])({url:"/alert/delete/".concat(t),method:"get"}).then((function(t){return t.data}))}},c1f9:function(t,e,n){var r=n("23e7"),a=n("2266"),i=n("8418");r({target:"Object",stat:!0},{fromEntries:function(t){var e={};return a(t,(function(t,n){i(e,t,n)}),void 0,!0),e}})},d28d:function(t,e,n){"use strict";n.d(e,"c",(function(){return a})),n.d(e,"e",(function(){return i})),n.d(e,"d",(function(){return o})),n.d(e,"a",(function(){return s})),n.d(e,"f",(function(){return u})),n.d(e,"b",(function(){return l}));var r=n("b775");function a(t){return Object(r["a"])({url:"/tag/get/".concat(t),method:"get"}).then((function(t){return t.data}))}function i(t){return Object(r["a"])({url:"/tag/page",method:"get",params:t}).then((function(t){return t.data}))}function o(t){return Object(r["a"])({url:"/tag/list",method:"get",params:t}).then((function(t){return t.data}))}function s(t){return Object(r["a"])({url:"/tag/create",method:"post",data:t}).then((function(t){return t.data}))}function u(t){return Object(r["a"])({url:"/tag/update",method:"post",data:t}).then((function(t){return t.data}))}function l(t){return Object(r["a"])({url:"/tag/delete/".concat(t),method:"get"}).then((function(t){return t.data}))}},d545:function(t,e,n){"use strict";n("2a9a")}}]);