(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b6146434"],{"08f9":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-dialog",{attrs:{title:"Edit Parameter",visible:t.visible},on:{"update:visible":function(e){t.visible=e}}},[n("el-table",{staticStyle:{width:"100%","margin-bottom":"10px"},attrs:{data:t.tableRows,"max-height":"350"}},[n("el-table-column",{attrs:{fixed:"",prop:"paramName",label:"ParamName",width:"180"}}),n("el-table-column",{attrs:{prop:"paramValue",label:"ParamValue"}}),n("el-table-column",{attrs:{prop:"scope",label:"Scope",width:"150"}}),n("el-table-column",{attrs:{fixed:"right",label:"Operations",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"text",size:"small",disabled:t.disabled},on:{click:function(n){return t.displayParamInForm(e.$index)}}},[t._v("Edit")]),n("el-button",{attrs:{type:"text",size:"small",disabled:t.disabled},on:{click:function(n){return t.deleteParam(e.$index)}}},[t._v("Delete")])]}}])})],1),n("el-form",{ref:"ruleForm",attrs:{inline:!0,model:t.formData,disabled:t.disabled,rules:t.formRules}},[n("el-form-item",{attrs:{label:"Name",prop:"paramName"}},[n("el-input",{attrs:{placeholder:"param name"},model:{value:t.formData.paramName,callback:function(e){t.$set(t.formData,"paramName",e)},expression:"formData.paramName"}})],1),n("el-form-item",{attrs:{label:"Value",prop:"paramValue"}},[n("el-input",{attrs:{placeholder:"param value"},model:{value:t.formData.paramValue,callback:function(e){t.$set(t.formData,"paramValue",e)},expression:"formData.paramValue"}})],1),n("el-form-item",{attrs:{label:"Scope",prop:"scope"}},[n("el-select",{staticStyle:{width:"140px"},attrs:{placeholder:"scope"},model:{value:t.formData.scope,callback:function(e){t.$set(t.formData,"scope",e)},expression:"formData.scope"}},t._l(t.scopeList,(function(t){return n("el-option",{key:t,attrs:{label:t,value:t}})})),1)],1),n("el-form-item",[n("el-button",{attrs:{type:"primary",plain:""},on:{click:t.upsertCaches}},[t._v("Upsert")]),n("el-button",{attrs:{type:"primary",plain:""},on:{click:t.upsertParams}},[t._v("Confirm")])],1)],1)],1)},r=[],o=n("5530"),i=n("3835"),c=(n("c740"),n("d81d"),n("a434"),n("4fad"),n("c1f9"),n("a573"),n("7647")),s={name:"EditParamDialog",props:{disabled:{type:Boolean,default:!1}},data:function(){return{visible:!1,flowId:null,scopeList:["JOB_FLOW"],formData:{},tableRows:[],formRules:{paramName:[{required:!0,message:"Please input param name",trigger:"blur"}],paramValue:[{required:!0,message:"Please select param value",trigger:"blur"}],scope:[{required:!0,message:"Please select value scope",trigger:"change"}]}}},methods:{init:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.flowId=t.flowId,this.resetForm(),this.fillTable(),this.visible=!0},fillTable:function(){var t=this;this.flowId&&Object(c["c"])(this.flowId).then((function(e){t.tableRows=Object.entries((null===e||void 0===e?void 0:e.params)||{}).map((function(t){var e=Object(i["a"])(t,2),n=e[0],a=e[1];return{paramName:n,paramValue:a,scope:"JOB_FLOW"}}))}))},upsertCaches:function(){var t=this;this.$refs.ruleForm.validate((function(e){if(e){var n=t.tableRows,a=n.findIndex((function(e){return e.paramName===t.formData.paramName}));a>-1?n.splice(a,1,Object(o["a"])({},t.formData)):n.push(Object(o["a"])({},t.formData)),t.resetForm()}}))},upsertParams:function(){var t=this;if(this.flowId){var e=Object.fromEntries(this.tableRows.map((function(t){return[t.paramName,t.paramValue]})));Object(c["n"])({id:this.flowId,params:e}).then((function(){t.resetForm(),t.visible=!1}))}else this.$message({message:"Flow Id not found",type:"error"})},displayParamInForm:function(t){var e=this.tableRows[t];this.formData={paramName:e.paramName,paramValue:e.paramValue,scope:e.scope}},deleteParam:function(t){this.tableRows.splice(t,1)},resetForm:function(){this.formData={}}}},l=s,u=n("2877"),d=Object(u["a"])(l,a,r,!1,null,null,null);e["a"]=d.exports},"1a26":function(t,e,n){"use strict";n("1e66")},"1e66":function(t,e,n){},"2cbf":function(t,e,n){"use strict";n("73e0")},"333d":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"pagination-container",class:{hidden:t.hidden}},[n("el-pagination",t._b({attrs:{background:t.background,"current-page":t.currentPage,"page-size":t.pageSize,layout:t.layout,"page-sizes":t.pageSizes,total:t.total},on:{"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e},"update:pageSize":function(e){t.pageSize=e},"update:page-size":function(e){t.pageSize=e},"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}},"el-pagination",t.$attrs,!1))],1)},r=[];n("a9e3");Math.easeInOutQuad=function(t,e,n,a){return t/=a/2,t<1?n/2*t*t+e:(t--,-n/2*(t*(t-2)-1)+e)};var o=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}();function i(t){document.documentElement.scrollTop=t,document.body.parentNode.scrollTop=t,document.body.scrollTop=t}function c(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function s(t,e,n){var a=c(),r=t-a,s=20,l=0;e="undefined"===typeof e?500:e;var u=function(){l+=s;var t=Math.easeInOutQuad(l,a,r,e);i(t),l<e?o(u):n&&"function"===typeof n&&n()};u()}var l={name:"Pagination",props:{total:{required:!0,type:Number},page:{type:Number,default:1},limit:{type:Number,default:20},pageSizes:{type:Array,default:function(){return[10,20,30,50]}},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},background:{type:Boolean,default:!0},autoScroll:{type:Boolean,default:!0},hidden:{type:Boolean,default:!1}},computed:{currentPage:{get:function(){return this.page},set:function(t){this.$emit("update:page",t)}},pageSize:{get:function(){return this.limit},set:function(t){this.$emit("update:limit",t)}}},methods:{handleSizeChange:function(t){this.$emit("pagination",{page:this.currentPage,limit:t}),this.autoScroll&&s(0,800)},handleCurrentChange:function(t){this.$emit("pagination",{page:t,limit:this.pageSize}),this.autoScroll&&s(0,800)}}},u=l,d=(n("2cbf"),n("2877")),f=Object(d["a"])(u,a,r,!1,null,"6af373ef",null);e["a"]=f.exports},"3a3d":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"code-area"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"value"}],ref:"codeText",attrs:{disabled:t.readOnly},domProps:{value:t.value},on:{input:function(e){e.target.composing||(t.value=e.target.value)}}})])},r=[],o=n("db05"),i=(n("0f7c"),n("a7be"),n("f6b6"),n("56b3"));n("8c33"),n("31c5"),n("ffda"),n("9b74"),n("991c"),n("02f0");var c={name:"CodeEditor",props:{mode:{type:String,default:""},value:{type:String,default:""},readOnly:{type:Boolean}},data:function(){return{sqlData:null}},computed:{newVal:function(){return this.sqlData?this.sqlData.getValue():""}},watch:{newVal:function(t,e){this.sqlData&&this.$emit("changeTextarea",this.sqlData.getValue())}},mounted:function(){var t=this;this.sqlData=i.fromTextArea(this.$refs.codeText,{value:this.value,mode:this.mode,indentWithTabs:!0,smartIndent:!0,lineNumbers:!0,matchBrackets:!0,cursorHeight:1,lineWrapping:!0,readOnly:this.readOnly,extraKeys:{Ctrl:"autocomplete"},hintOptions:{completeSingle:!1}}),this.sqlData.on("inputRead",(function(){t.sqlData.showHint()}))},methods:{setVal:function(t){this.sqlData.setValue(t)},format:function(){var t=this.getLangFormatOption(),e=Object(o["format"])(this.sqlData.getValue(),{language:t});this.sqlData.setValue(e)},getLangFormatOption:function(){switch(this.mode){case"text/x-sh":return"";case"text/x-sql":return"sql";case"text/x-hive":default:return"spark"}}}},s=c,l=(n("1a26"),n("2877")),u=Object(l["a"])(s,a,r,!1,null,null,null);e["a"]=u.exports},"491a":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-drawer",{attrs:{title:"Current Node settings",visible:t.visible,"destroy-on-close":!0,"wrapper-closable":!1,direction:t.direction,modal:!0,"modal-append-to-body":!0,size:"40%"},on:{"update:visible":function(e){t.visible=e}}},[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:22}},[n("el-form",{ref:"formData",attrs:{model:t.formData,disabled:t.disabled,rules:t.rules,"label-width":"150px"}},[n("el-form-item",{attrs:{label:"Node Name",prop:"name"}},[n("el-input",{model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData.name"}})],1),n("el-form-item",{attrs:{label:"Description",prop:"description"}},[n("el-input",{attrs:{type:"textarea"},model:{value:t.formData.description,callback:function(e){t.$set(t.formData,"description",e)},expression:"formData.description"}})],1),n("el-form-item",{attrs:{label:"Node Type",prop:"type"}},[n("el-select",{staticStyle:{width:"100%"},on:{change:function(e){return t.changeJobType()}},model:{value:t.formData.type,callback:function(e){t.$set(t.formData,"type",e)},expression:"formData.type"}},t._l(t.typeList,(function(t){return n("el-option",{key:t,attrs:{label:t,value:t}})})),1)],1),n("el-form-item",{attrs:{label:"Version",prop:"version"}},[n("el-select",{staticStyle:{width:"100%"},model:{value:t.formData.version,callback:function(e){t.$set(t.formData,"version",e)},expression:"formData.version"}},t._l(t.versionList,(function(t){return n("el-option",{key:t,attrs:{label:t,value:t}})})),1)],1),n("el-form-item",{attrs:{label:"Worker Group",prop:"routeUrl"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{multiple:""},model:{value:t.formData.routeUrl,callback:function(e){t.$set(t.formData,"routeUrl",e)},expression:"formData.routeUrl"}},t._l(t.routeUrlList,(function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}},[n("span",{staticStyle:{float:"left"}},[t._v(t._s(e.name))]),n("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[t._v(" "+t._s(e.ip)+" - "+t._s(e.role)+" - "),n("span",{style:{color:e.active?"#67C23A":"#F56C6C"}},[t._v(t._s(e.active?"active":"inactive"))])])])})),1)],1),n("el-form-item",{attrs:{label:"Execution Mode",prop:"execMode"}},[n("el-select",{staticStyle:{width:"100%"},model:{value:t.formData.execMode,callback:function(e){t.$set(t.formData,"execMode",e)},expression:"formData.execMode"}},t._l(t.execModeList,(function(t){return n("el-option",{key:t,attrs:{label:t,value:t}})})),1)],1),n("el-form-item",{attrs:{label:"Deploy Mode",prop:"deployMode"}},[n("el-select",{staticStyle:{width:"100%"},model:{value:t.formData.deployMode,callback:function(e){t.$set(t.formData,"deployMode",e)},expression:"formData.deployMode"}},t._l(t.deployModeList,(function(t){return n("el-option",{key:t,attrs:{label:t,value:t}})})),1)],1),n("el-form-item",{attrs:{label:"Retry Times",prop:"config.retryTimes"}},[n("el-input",{attrs:{placeholder:"integer"},model:{value:t.formData.config.retryTimes,callback:function(e){t.$set(t.formData.config,"retryTimes",e)},expression:"formData.config.retryTimes"}})],1),n("el-form-item",{attrs:{label:"Retry Interval",prop:"config.retryInterval"}},[n("el-input",{attrs:{placeholder:"Unit: s sec, m min, h hour, d day"},model:{value:t.formData.config.retryInterval,callback:function(e){t.$set(t.formData.config,"retryInterval",e)},expression:"formData.config.retryInterval"}})],1),n("el-form-item",{attrs:{label:"Timeout",prop:"config.timeout"}},[n("el-input",{attrs:{placeholder:"Unit: s sec, m min, h hour, d day"},model:{value:t.formData.config.timeout,callback:function(e){t.$set(t.formData.config,"timeout",e)},expression:"formData.config.timeout"}})],1),n("el-form-item",{attrs:{label:"Variables",prop:"variables"}},[n("el-input",{attrs:{placeholder:"{'k1': 'v1', ...}"},model:{value:t.formData.variables,callback:function(e){t.$set(t.formData,"variables",e)},expression:"formData.variables"}})],1),"FLINK"===t.nodeType?["FLINK_SQL"===t.formData.type?[n("el-form-item",{attrs:{label:"Catalogs",prop:"catalogs"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{multiple:""},model:{value:t.formData.config.catalogs,callback:function(e){t.$set(t.formData.config,"catalogs",e)},expression:"formData.config.catalogs"}},t._l(t.catalogList,(function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}},[n("span",{staticStyle:{float:"left"}},[t._v(t._s(e.name))]),n("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[t._v(t._s(e.description))])])})),1)],1)]:t._e(),n("el-form-item",{attrs:{label:"External Jars",prop:"extJars"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{multiple:""},model:{value:t.formData.config.extJars,callback:function(e){t.$set(t.formData.config,"extJars",e)},expression:"formData.config.extJars"}},t._l(t.extJarList,(function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}},[n("span",{staticStyle:{float:"left"}},[t._v(t._s(e.name))]),n("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[t._v(t._s(e.description))])])})),1)],1),n("el-form-item",{attrs:{label:"Flink SQL/Jar",prop:"subject"}},["FLINK_SQL"===t.formData.type?n("CodeEditor",{ref:"codeEditor",attrs:{value:t.formData.subject,"read-only":t.disabled,mode:"text/x-hive"},on:{"update:value":function(e){return t.$set(t.formData,"subject",e)},changeTextarea:function(e){return t.changeTextarea(e)}}}):n("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4}},model:{value:t.formData.subject,callback:function(e){t.$set(t.formData,"subject",e)},expression:"formData.subject"}})],1),"FLINK_JAR"===t.formData.type?[n("el-form-item",{attrs:{label:"Option Args",prop:"optionArgs"}},[n("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4}},model:{value:t.formData.config.optionArgs,callback:function(e){t.$set(t.formData.config,"optionArgs",e)},expression:"formData.config.optionArgs"}})],1),n("el-form-item",{attrs:{label:"Main Class",prop:"mainClass"}},[n("el-input",{model:{value:t.formData.config.mainClass,callback:function(e){t.$set(t.formData.config,"mainClass",e)},expression:"formData.config.mainClass"}})],1),n("el-form-item",{attrs:{label:"Main Args",prop:"mainArgs"}},[n("el-input",{model:{value:t.formData.config.mainArgs,callback:function(e){t.$set(t.formData.config,"mainArgs",e)},expression:"formData.config.mainArgs"}})],1)]:t._e()]:t._e(),"SHELL"===t.nodeType?[n("el-form-item",{attrs:{label:"Script",prop:"subject"}},[n("CodeEditor",{ref:"codeEditor",attrs:{value:t.formData.subject,"read-only":t.disabled,mode:"text/x-sh"},on:{"update:value":function(e){return t.$set(t.formData,"subject",e)},changeTextarea:function(e){return t.changeTextarea(e)}}})],1)]:t._e(),"SQL"===t.nodeType?[n("el-form-item",{attrs:{label:"DataSource",prop:"config.dsId"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"Please select data source"},model:{value:t.formData.config.dsId,callback:function(e){t.$set(t.formData.config,"dsId",e)},expression:"formData.config.dsId"}},t._l(t.dataSourceList,(function(t){return n("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),n("el-form-item",{attrs:{label:"SQL",prop:"subject"}},[n("CodeEditor",{ref:"codeEditor",attrs:{value:t.formData.subject,"read-only":t.disabled,mode:"text/x-sql"},on:{"update:value":function(e){return t.$set(t.formData,"subject",e)},changeTextarea:function(e){return t.changeTextarea(e)}}})],1)]:t._e(),"CONDITION"===t.nodeType?[n("el-form-item",{attrs:{label:"Precondition",prop:"config.condition"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"Please select preVertices' join condition"},model:{value:t.formData.config.condition,callback:function(e){t.$set(t.formData.config,"condition",e)},expression:"formData.config.condition"}},t._l(t.preconditionList,(function(t){return n("el-option",{key:t,attrs:{label:t,value:t}})})),1)],1)]:t._e(),"DEPENDENT"===t.nodeType?[n("el-form-item",{attrs:{label:"Relation",prop:"config.relation"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"Please select dependent relation"},model:{value:t.formData.config.relation,callback:function(e){t.$set(t.formData.config,"relation",e)},expression:"formData.config.relation"}},t._l(t.dependentRelationList,(function(t){return n("el-option",{key:t,attrs:{label:t,value:t}})})),1)],1),t._l(t.formData.config.dependentItems,(function(e,a){return[n("el-row",{key:"f"+a,attrs:{gutter:10}},[n("el-col",{attrs:{span:14}},[n("el-form-item",{staticStyle:{"margin-bottom":"5px"},attrs:{label:"Dependent"+a,prop:"config.dependentItems."+a+".flowId"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"Please select dependent job flow",size:"small"},on:{change:function(e){return t.changeDependentFlow(e,a)}},model:{value:e.flowId,callback:function(n){t.$set(e,"flowId",n)},expression:"dependentItem.flowId"}},t._l(t.jobFlowList,(function(t){return n("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1)],1),n("el-col",{attrs:{span:10}},[n("el-form-item",{staticStyle:{"margin-bottom":"5px"},attrs:{prop:"config.dependentItems."+a+".jobId","label-width":"0px"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"Please select dependent job",size:"small"},on:{change:t.forceUpdate},model:{value:e.jobId,callback:function(n){t.$set(e,"jobId",n)},expression:"dependentItem.jobId"}},t._l(t.jobLists[a],(function(t){return n("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1)],1)],1),n("el-row",{key:"s"+a},[n("el-col",{attrs:{span:24}},[n("el-form-item",{staticStyle:{"margin-bottom":"5px"},attrs:{prop:"config.dependentItems."+a+".statuses"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"Please select expected status",size:"small",multiple:""},on:{change:t.forceUpdate},model:{value:e.statuses,callback:function(n){t.$set(e,"statuses",n)},expression:"dependentItem.statuses"}},t._l(t.executionStatusList,(function(t){return n("el-option",{key:t.name,attrs:{label:t.name,value:t.name}})})),1)],1)],1)],1),n("el-row",{key:"tr"+a,attrs:{gutter:10}},[n("el-col",{attrs:{span:14}},[n("el-form-item",{attrs:{prop:"config.dependentItems."+a+".strategy"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"Please select dependent job flow",size:"small"},on:{change:t.forceUpdate},model:{value:e.strategy,callback:function(n){t.$set(e,"strategy",n)},expression:"dependentItem.strategy"}},t._l(t.dependentStrategyList,(function(t){return n("el-option",{key:t.name,attrs:{label:t.name,value:t.name}})})),1)],1)],1),n("el-col",{attrs:{span:7}},[n("el-form-item",{attrs:{prop:"config.dependentItems."+a+".duration","label-width":"0px"}},[n("el-input",{attrs:{size:"small",placeholder:"Unit: s sec, m min, h hour, d day"},on:{change:t.forceUpdate,blur:t.forceUpdate},model:{value:e.duration,callback:function(n){t.$set(e,"duration",n)},expression:"dependentItem.duration"}})],1)],1),n("el-col",{staticStyle:{padding:"10px 5px"},attrs:{span:1}},[n("router-link",{attrs:{to:"/project/flow/show/"+e.flowId}},[n("i",{staticClass:"el-icon-link"})])],1),n("el-col",{attrs:{span:2}},[n("el-button",{attrs:{icon:"el-icon-delete",size:"small",circle:""},on:{click:function(n){return t.deleteDependentItem(e)}}})],1)],1)]}))]:t._e(),"SUB_FLOW"===t.nodeType?[n("el-form-item",{attrs:{label:"Job Flow",prop:"config.flowId"}},[n("el-select",{staticStyle:{width:"95%","padding-right":"2px"},attrs:{filterable:"",remote:"","reserve-keyword":"",placeholder:"Please enter job flow name to search"},model:{value:t.formData.config.flowId,callback:function(e){t.$set(t.formData.config,"flowId",e)},expression:"formData.config.flowId"}},t._l(t.jobFlowList,(function(t){return n("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1),t.formData.config.flowId?n("router-link",{attrs:{to:"/project/flow/edit/"+t.formData.config.flowId}},[n("i",{staticClass:"el-icon-link"})]):t._e()],1)]:t._e(),n("el-form-item",{staticStyle:{"text-align":"right"},attrs:{"label-width":"10%"}},[n("el-button",{attrs:{type:"warning",plain:""},on:{click:function(e){return t.resetForm()}}},[t._v("Reset Form")]),t.isSqlNode()?n("el-button",{attrs:{type:"success",plain:""},on:{click:function(e){return t.formatSql()}}},[t._v("Format SQL")]):t._e(),"DEPENDENT"===t.nodeType?n("el-button",{attrs:{type:"success",plain:""},on:{click:function(e){return t.addDependentItem()}}},[t._v("Add Dependent")]):t._e(),n("el-button",{attrs:{type:"primary",plain:""},on:{click:function(e){return t.submitForm()}}},[t._v("Confirm Add")])],1)],2)],1)],1)],1)},r=[],o=n("5530"),i=(n("a434"),n("b0c0"),n("e9c4"),n("b64b"),n("3a3d")),c=n("76fe"),s=n("7fbc"),l=n("c24f"),u=n("6c6e"),d=n("b964"),f=n("7647"),p=n("d175"),m={name:"FormModel",components:{CodeEditor:i["a"]},filters:{},props:{disabled:{type:Boolean,default:!1}},data:function(){return{visible:!1,node:{},nodeType:"",direction:"rtl",execModeList:[],catalogList:[],extJarList:[],typeList:[],deployModeList:[],executionStatusList:[],dependentStrategyList:[],routeUrlList:[],versionList:[],dataSourceList:[],preconditionList:[],dependentRelationList:[],jobLists:[],jobFlowList:[],formData:{config:{}},rules:{name:[{required:!0,message:"Please input node name",trigger:"blur"}],type:[{required:!0,message:"Please select node type",trigger:"change"}],version:[{required:!0,message:"Please select version",trigger:"change"}],routeUrl:[{required:!0,message:"Please select worker group",trigger:"change"}],execMode:[{required:!0,message:"Please select execution mode",trigger:"change"}],deployMode:[{required:!0,message:"Please select deploy mode",trigger:"change"}],"config.retryTimes":[{required:!0,message:"Please enter retry times",trigger:"change"}],"config.dsId":[{required:!0,message:"Please choose data source",trigger:"change"}],"config.condition":[{required:!0,message:"Please choose vertex precondition",trigger:"change"}],"config.relation":[{required:!0,message:"Please choose dependent relation",trigger:"change"}],"config.flowId":[{required:!0,message:"Please choose a workflow",trigger:"change"}]}}},created:function(){},methods:{initFn:function(t){var e=this;this.node=t;var n=t.getData();if(this.nodeType=null===n||void 0===n?void 0:n.type,this.initRouteUrlList(),this.initPreconditionList(),this.nodeType)switch(this.initNodeTypeList(this.nodeType),this.initExecModeList(this.nodeType),this.initDeployModeList(this.nodeType),this.initVersionList(this.nodeType),this.nodeType){case"FLINK":this.getCatalogList(),this.getExtJarList();break;case"DEPENDENT":this.initDependentRelationList(),this.initJobFlowList({status:["ONLINE","SCHEDULING"]}),this.initExecutionStatusList(),this.initDependentStrategyList();break;case"SUB_FLOW":this.initJobFlowList({type:["SUB_FLOW","JOB_FLOW"],status:["ONLINE","SCHEDULING"]});break;case"SHELL":default:break}if(n.id){var a=this.$route.params.type;Object(c["c"])(n.id,a).then((function(t){var n=JSON.stringify(t.variables||{});e.initDependentJobLists(t.config),e.formData=Object(o["a"])(Object(o["a"])({},t),{},{variables:n}),e.changeJobType(),e.$refs.codeEditor&&e.$refs.codeEditor.setVal(e.formData.subject)}))}else this.resetForm(),this.formData.flowId=this.$route.params.id},changeJobType:function(){var t=this,e=this.formData.type;Object(d["d"])({jobType:e}).then((function(e){t.dataSourceList=e}))},initRouteUrlList:function(){var t=this;Object(l["e"])().then((function(e){t.routeUrlList=e}))},initPreconditionList:function(){var t=this;Object(s["f"])().then((function(e){t.preconditionList=e}))},initDependentRelationList:function(){var t=this;Object(s["a"])().then((function(e){t.dependentRelationList=e}))},initJobFlowList:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(f["d"])(e).then((function(e){t.jobFlowList=e}))},initDependentJobLists:function(t){for(var e=this,n=t.dependentItems||[],a=function(t){Object(c["b"])({flowId:n[t].flowId}).then((function(n){e.jobLists.splice(t,1,n||[])}))},r=0;r<n.length;r++)a(r)},initVersionList:function(t){var e=this;Object(s["h"])(t).then((function(t){e.versionList=t}))},initDeployModeList:function(t){var e=this;Object(s["b"])(t).then((function(t){e.deployModeList=t}))},initExecModeList:function(t){this.execModeList="FLINK"===t?["STREAMING","BATCH"]:["BATCH"]},initExecutionStatusList:function(){var t=this,e={className:"ExecutionStatus"};Object(s["g"])(e).then((function(e){t.executionStatusList=e}))},initDependentStrategyList:function(){var t=this,e={className:"DependentStrategy"};Object(s["g"])(e).then((function(e){t.dependentStrategyList=e}))},initNodeTypeList:function(t){var e=this;Object(s["e"])(t).then((function(t){e.typeList=t}))},getCatalogList:function(){var t=this;Object(p["e"])().then((function(e){t.catalogList=e}))},getExtJarList:function(){var t=this;Object(u["e"])({type:"JAR"}).then((function(e){t.extJarList=e}))},changeDependentFlow:function(t,e){var n=this;Object(c["b"])({flowId:t,flag:"flow"}).then((function(t){n.jobLists.splice(e,1,t||[]),n.formData.config.dependentItems[e].jobId=null,n.$forceUpdate()}))},addDependentItem:function(){this.formData.config.dependentItems||(this.formData.config.dependentItems=[]),this.formData.config.dependentItems.push({flowId:null}),this.$forceUpdate()},deleteDependentItem:function(t){var e=this.formData.config.dependentItems,n=e.indexOf(t);-1!==n&&e.splice(n,1),this.$forceUpdate()},forceUpdate:function(){this.$forceUpdate()},isSqlNode:function(){var t=this.formData.type;return t&&-1!==t.indexOf("SQL")},changeTextarea:function(t){this.$set(this.formData,"subject",t)},formatSql:function(){this.$refs.codeEditor.format()},submitForm:function(){var t=this;this.$refs["formData"].validate((function(e){if(!e)return!1;t.formData.config.type=t.formData.type;var n=JSON.parse(t.formData.variables||"{}"),a=Object(o["a"])(Object(o["a"])({},t.formData),{},{variables:n});a.id?Object(c["j"])(a).then((function(e){t.modifyNode(e),t.$message.success("Job Updated, id="+e.id),t.$emit("callback"),t.visible=!1})):Object(c["a"])(a).then((function(e){t.modifyNode(e),t.$message.success("Job Created, id="+e.id),t.$emit("callback"),t.visible=!1}))}))},modifyNode:function(t){var e=this.node.getData(),n="AND";"CONDITION"===(null===t||void 0===t?void 0:t.type)&&(n=t.config.condition),this.node.setData(Object(o["a"])(Object(o["a"])({},e),{},{id:t.id,name:t.name,precondition:n}))},resetForm:function(){this.$refs["formData"]?this.$refs["formData"].resetFields():this.formData={config:{}},this.$refs.codeEditor&&this.$refs.codeEditor.setVal("")}}},h=m,b=(n("5209"),n("2877")),g=Object(b["a"])(h,a,r,!1,null,null,null);e["a"]=g.exports},5209:function(t,e,n){"use strict";n("a266")},6724:function(t,e,n){"use strict";n("8d41");var a="@@wavesContext";function r(t,e){function n(n){var a=Object.assign({},e.value),r=Object.assign({ele:t,type:"hit",color:"rgba(0, 0, 0, 0.15)"},a),o=r.ele;if(o){o.style.position="relative",o.style.overflow="hidden";var i=o.getBoundingClientRect(),c=o.querySelector(".waves-ripple");switch(c?c.className="waves-ripple":(c=document.createElement("span"),c.className="waves-ripple",c.style.height=c.style.width=Math.max(i.width,i.height)+"px",o.appendChild(c)),r.type){case"center":c.style.top=i.height/2-c.offsetHeight/2+"px",c.style.left=i.width/2-c.offsetWidth/2+"px";break;default:c.style.top=(n.pageY-i.top-c.offsetHeight/2-document.documentElement.scrollTop||document.body.scrollTop)+"px",c.style.left=(n.pageX-i.left-c.offsetWidth/2-document.documentElement.scrollLeft||document.body.scrollLeft)+"px"}return c.style.backgroundColor=r.color,c.className="waves-ripple z-active",!1}}return t[a]?t[a].removeHandle=n:t[a]={removeHandle:n},n}var o={bind:function(t,e){t.addEventListener("click",r(t,e),!1)},update:function(t,e){t.removeEventListener("click",t[a].removeHandle,!1),t.addEventListener("click",r(t,e),!1)},unbind:function(t){t.removeEventListener("click",t[a].removeHandle,!1),t[a]=null,delete t[a]}},i=function(t){t.directive("waves",o)};window.Vue&&(window.waves=o,Vue.use(i)),o.install=i;e["a"]=o},"6c6e":function(t,e,n){"use strict";n.d(e,"d",(function(){return r})),n.d(e,"g",(function(){return o})),n.d(e,"f",(function(){return i})),n.d(e,"e",(function(){return c})),n.d(e,"a",(function(){return s})),n.d(e,"h",(function(){return l})),n.d(e,"c",(function(){return u})),n.d(e,"b",(function(){return d}));var a=n("b775");function r(t){return Object(a["a"])({url:"/resource/get/".concat(t),method:"get"}).then((function(t){return t.data}))}function o(t){return Object(a["a"])({url:"/resource/getWithParents/".concat(t),method:"get"}).then((function(t){return t.data}))}function i(t){return Object(a["a"])({url:"/resource/page",method:"get",params:t}).then((function(t){return t.data}))}function c(t){return Object(a["a"])({url:"/resource/list",method:"get",params:t}).then((function(t){return t.data}))}function s(t){return Object(a["a"])({url:"/resource/create",method:"post",data:t}).then((function(t){return t.data}))}function l(t){return Object(a["a"])({url:"/resource/update",method:"post",data:t}).then((function(t){return t.data}))}function u(t){return Object(a["a"])({url:"/resource/delete/".concat(t),method:"get"}).then((function(t){return t.data}))}function d(t){return Object(a["a"])({url:"/resource/deleteFile",method:"post",data:t}).then((function(t){return t.data}))}},"73e0":function(t,e,n){},7647:function(t,e,n){"use strict";n.d(e,"f",(function(){return i})),n.d(e,"d",(function(){return c})),n.d(e,"c",(function(){return s})),n.d(e,"b",(function(){return u})),n.d(e,"n",(function(){return d})),n.d(e,"p",(function(){return p})),n.d(e,"j",(function(){return h})),n.d(e,"a",(function(){return b})),n.d(e,"k",(function(){return g})),n.d(e,"m",(function(){return v})),n.d(e,"l",(function(){return y})),n.d(e,"g",(function(){return j})),n.d(e,"o",(function(){return O})),n.d(e,"e",(function(){return L})),n.d(e,"h",(function(){return I})),n.d(e,"i",(function(){return S}));var a=n("c7eb"),r=n("1da1"),o=n("b775");function i(t){return Object(o["a"])({url:"/jobFlow/page",method:"get",params:t}).then((function(t){return t.data}))}function c(t){return Object(o["a"])({url:"/jobFlow/idNameMapList",method:"get",params:t}).then((function(t){return t.data}))}function s(t){return l.apply(this,arguments)}function l(){return l=Object(r["a"])(Object(a["a"])().mark((function t(e){return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(o["a"])({url:"/jobFlow/get/".concat(e),method:"get"}).then((function(t){return t.data})));case 1:case"end":return t.stop()}}),t)}))),l.apply(this,arguments)}function u(t){return Object(o["a"])({url:"/jobFlow/create",method:"post",data:t}).then((function(t){return t.data}))}function d(t){return f.apply(this,arguments)}function f(){return f=Object(r["a"])(Object(a["a"])().mark((function t(e){return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(o["a"])({url:"/jobFlow/update",method:"post",data:e}).then((function(t){return t.data})));case 1:case"end":return t.stop()}}),t)}))),f.apply(this,arguments)}function p(t){return m.apply(this,arguments)}function m(){return m=Object(r["a"])(Object(a["a"])().mark((function t(e){return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(o["a"])({url:"/jobFlow/updateFlow",method:"post",data:e}).then((function(t){return t.data})));case 1:case"end":return t.stop()}}),t)}))),m.apply(this,arguments)}function h(t){return Object(o["a"])({url:"/jobFlow/purge/".concat(t),method:"get"}).then((function(t){return t.data}))}function b(t){return Object(o["a"])({url:"/jobFlow/copy/".concat(t),method:"get"}).then((function(t){return t.data}))}function g(t,e){return Object(o["a"])({url:"/jobFlow/schedule/runOnce/".concat(t),method:"post",data:e}).then((function(t){return t.data}))}function v(t){return Object(o["a"])({url:"/jobFlow/schedule/stop/".concat(t),method:"get"}).then((function(t){return t.data}))}function y(t){return Object(o["a"])({url:"/jobFlow/schedule/start/".concat(t),method:"get"}).then((function(t){return t.data}))}function j(t){return Object(o["a"])({url:"/jobFlowRun/page",method:"get",params:t}).then((function(t){return t.data}))}function w(t){return D.apply(this,arguments)}function D(){return D=Object(r["a"])(Object(a["a"])().mark((function t(e){return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(o["a"])({url:"/jobFlowRun/get/".concat(e),method:"get"}).then((function(t){return t.data})));case 1:case"end":return t.stop()}}),t)}))),D.apply(this,arguments)}function O(t){return x.apply(this,arguments)}function x(){return x=Object(r["a"])(Object(a["a"])().mark((function t(e){return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(o["a"])({url:"/jobFlowRun/update",method:"post",data:e}).then((function(t){return t.data})));case 1:case"end":return t.stop()}}),t)}))),x.apply(this,arguments)}function L(t,e){return k.apply(this,arguments)}function k(){return k=Object(r["a"])(Object(a["a"])().mark((function t(e,n){return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return","instance"!==n?s(e):w(e));case 1:case"end":return t.stop()}}),t)}))),k.apply(this,arguments)}function I(t){return Object(o["a"])({url:"/jobFlowRun/kill/".concat(t),method:"get"}).then((function(t){return t.data}))}function S(t){return Object(o["a"])({url:"/quartz/parseExpr",method:"get",params:t}).then((function(t){return t.data}))}},"76fe":function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"e",(function(){return c})),n.d(e,"a",(function(){return l})),n.d(e,"j",(function(){return u})),n.d(e,"i",(function(){return d})),n.d(e,"f",(function(){return m})),n.d(e,"g",(function(){return h})),n.d(e,"d",(function(){return v})),n.d(e,"c",(function(){return j})),n.d(e,"h",(function(){return w}));var a=n("c7eb"),r=n("1da1"),o=n("b775");function i(t){return Object(o["a"])({url:"/jobInfo/list",method:"get",params:t}).then((function(t){return t.data}))}function c(t){return Object(o["a"])({url:"/jobInfo/page",method:"get",params:t}).then((function(t){return t.data}))}function s(t){return Object(o["a"])({url:"/jobInfo/get/".concat(t),method:"get"}).then((function(t){return t.data}))}function l(t){return Object(o["a"])({url:"/jobInfo/create",method:"post",data:t}).then((function(t){return t.data}))}function u(t){return Object(o["a"])({url:"/jobInfo/update",method:"post",data:t}).then((function(t){return t.data}))}function d(t){return Object(o["a"])({url:"/jobInfo/purge/".concat(t),method:"get"}).then((function(t){return t.data}))}function f(t){return p.apply(this,arguments)}function p(){return p=Object(r["a"])(Object(a["a"])().mark((function t(e){return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(o["a"])({url:"/jobInfo/getByIds",method:"post",data:e}).then((function(t){return t.data})));case 1:case"end":return t.stop()}}),t)}))),p.apply(this,arguments)}function m(t){return Object(o["a"])({url:"/jobRun/get/".concat(t),method:"get"}).then((function(t){return t.data}))}function h(t){return Object(o["a"])({url:"/jobRun/page",method:"get",params:t}).then((function(t){return t.data}))}function b(t,e){return g.apply(this,arguments)}function g(){return g=Object(r["a"])(Object(a["a"])().mark((function t(e,n){var r;return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r={flowRunId:e,jobIds:n},t.abrupt("return",Object(o["a"])({url:"/jobRun/getJobOrRunByJobIds",method:"post",data:r}).then((function(t){return t.data})));case 2:case"end":return t.stop()}}),t)}))),g.apply(this,arguments)}function v(t,e,n){return y.apply(this,arguments)}function y(){return y=Object(r["a"])(Object(a["a"])().mark((function t(e,n,r){return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return","instance"!==n?f(r):b(e,r));case 1:case"end":return t.stop()}}),t)}))),y.apply(this,arguments)}function j(t,e){return"instance"!==e?s(t):m(t)}function w(t){return Object(o["a"])({url:"/jobRun/kill/".concat(t),method:"get"}).then((function(t){return t.data}))}},"7fbc":function(t,e,n){"use strict";n.d(e,"c",(function(){return i})),n.d(e,"e",(function(){return c})),n.d(e,"d",(function(){return s})),n.d(e,"b",(function(){return u})),n.d(e,"g",(function(){return d})),n.d(e,"h",(function(){return f})),n.d(e,"f",(function(){return p})),n.d(e,"a",(function(){return m}));var a=n("c7eb"),r=n("1da1"),o=n("b775");function i(t){return Object(o["a"])({url:"/attr/edgeStates?jobId=".concat(t),method:"get"}).then((function(t){return t.data}))}function c(t){return Object(o["a"])({url:"/attr/nodeTypes?type=".concat(t),method:"get"}).then((function(t){return t.data}))}function s(t){return l.apply(this,arguments)}function l(){return l=Object(r["a"])(Object(a["a"])().mark((function t(e){return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(o["a"])({url:"/attr/nodeClassification?jobType=".concat(e),method:"get"}).then((function(t){return t.data}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),l.apply(this,arguments)}function u(t){return Object(o["a"])({url:"/attr/deployModes?type=".concat(t),method:"get"}).then((function(t){return t.data}))}function d(t){return Object(o["a"])({url:"/attr/enums",method:"get",params:t}).then((function(t){return t.data}))}function f(t){return Object(o["a"])({url:"/attr/versions?type=".concat(t),method:"get"}).then((function(t){return t.data}))}function p(){return Object(o["a"])({url:"/attr/preconditions",method:"get"}).then((function(t){return t.data}))}function m(){return Object(o["a"])({url:"/attr/dependentRelations",method:"get"}).then((function(t){return t.data}))}},"8d41":function(t,e,n){},a266:function(t,e,n){},b964:function(t,e,n){"use strict";n.d(e,"c",(function(){return r})),n.d(e,"e",(function(){return o})),n.d(e,"d",(function(){return i})),n.d(e,"a",(function(){return c})),n.d(e,"g",(function(){return s})),n.d(e,"b",(function(){return l})),n.d(e,"f",(function(){return u}));var a=n("b775");function r(t){return Object(a["a"])({url:"/datasource/get/".concat(t),method:"get"}).then((function(t){return t.data}))}function o(t){return Object(a["a"])({url:"/datasource/page",method:"get",params:t}).then((function(t){return t.data}))}function i(t){return Object(a["a"])({url:"/datasource/list",method:"get",params:t}).then((function(t){return t.data}))}function c(t){return Object(a["a"])({url:"/datasource/create",method:"post",data:t}).then((function(t){return t.data}))}function s(t){return Object(a["a"])({url:"/datasource/update",method:"post",data:t}).then((function(t){return t.data}))}function l(t){return Object(a["a"])({url:"/datasource/delete/".concat(t),method:"get"}).then((function(t){return t.data}))}function u(t){return Object(a["a"])({url:"/datasource/test/".concat(t),method:"get"}).then((function(t){return t.data}))}},d175:function(t,e,n){"use strict";n.d(e,"c",(function(){return r})),n.d(e,"d",(function(){return o})),n.d(e,"e",(function(){return i})),n.d(e,"a",(function(){return c})),n.d(e,"f",(function(){return s})),n.d(e,"b",(function(){return l}));var a=n("b775");function r(t){return Object(a["a"])({url:"/catalog/get/".concat(t),method:"get"}).then((function(t){return t.data}))}function o(t){return Object(a["a"])({url:"/catalog/page",method:"get",params:t}).then((function(t){return t.data}))}function i(){return Object(a["a"])({url:"/catalog/list",method:"get"}).then((function(t){return t.data}))}function c(t){return Object(a["a"])({url:"/catalog/create",method:"post",data:t}).then((function(t){return t.data}))}function s(t){return Object(a["a"])({url:"/catalog/update",method:"post",data:t}).then((function(t){return t.data}))}function l(t){return Object(a["a"])({url:"/catalog/delete/".concat(t),method:"get"}).then((function(t){return t.data}))}}}]);