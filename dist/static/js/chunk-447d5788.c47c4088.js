(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-447d5788"],{"0093":function(t,e,n){"use strict";n("5fa7")},"2cbf":function(t,e,n){"use strict";n("73e0")},"333d":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"pagination-container",class:{hidden:t.hidden}},[n("el-pagination",t._b({attrs:{background:t.background,"current-page":t.currentPage,"page-size":t.pageSize,layout:t.layout,"page-sizes":t.pageSizes,total:t.total},on:{"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e},"update:pageSize":function(e){t.pageSize=e},"update:page-size":function(e){t.pageSize=e},"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}},"el-pagination",t.$attrs,!1))],1)},r=[];n("a9e3");Math.easeInOutQuad=function(t,e,n,a){return t/=a/2,t<1?n/2*t*t+e:(t--,-n/2*(t*(t-2)-1)+e)};var i=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}();function o(t){document.documentElement.scrollTop=t,document.body.parentNode.scrollTop=t,document.body.scrollTop=t}function s(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function l(t,e,n){var a=s(),r=t-a,l=20,u=0;e="undefined"===typeof e?500:e;var c=function(){u+=l;var t=Math.easeInOutQuad(u,a,r,e);o(t),u<e?i(c):n&&"function"===typeof n&&n()};c()}var u={name:"Pagination",props:{total:{required:!0,type:Number},page:{type:Number,default:1},limit:{type:Number,default:20},pageSizes:{type:Array,default:function(){return[10,20,30,50]}},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},background:{type:Boolean,default:!0},autoScroll:{type:Boolean,default:!0},hidden:{type:Boolean,default:!1}},computed:{currentPage:{get:function(){return this.page},set:function(t){this.$emit("update:page",t)}},pageSize:{get:function(){return this.limit},set:function(t){this.$emit("update:limit",t)}}},methods:{handleSizeChange:function(t){this.$emit("pagination",{page:this.currentPage,limit:t}),this.autoScroll&&l(0,800)},handleCurrentChange:function(t){this.$emit("pagination",{page:t,limit:this.pageSize}),this.autoScroll&&l(0,800)}}},c=u,d=(n("2cbf"),n("2877")),f=Object(d["a"])(c,a,r,!1,null,"6af373ef",null);e["a"]=f.exports},"4e82":function(t,e,n){"use strict";var a=n("23e7"),r=n("1c0b"),i=n("7b0b"),o=n("d039"),s=n("a640"),l=[],u=l.sort,c=o((function(){l.sort(void 0)})),d=o((function(){l.sort(null)})),f=s("sort"),m=c||!d||!f;a({target:"Array",proto:!0,forced:m},{sort:function(t){return void 0===t?u.call(i(this)):u.call(i(this),r(t))}})},"5fa7":function(t,e,n){},6724:function(t,e,n){"use strict";n("8d41");var a="@@wavesContext";function r(t,e){function n(n){var a=Object.assign({},e.value),r=Object.assign({ele:t,type:"hit",color:"rgba(0, 0, 0, 0.15)"},a),i=r.ele;if(i){i.style.position="relative",i.style.overflow="hidden";var o=i.getBoundingClientRect(),s=i.querySelector(".waves-ripple");switch(s?s.className="waves-ripple":(s=document.createElement("span"),s.className="waves-ripple",s.style.height=s.style.width=Math.max(o.width,o.height)+"px",i.appendChild(s)),r.type){case"center":s.style.top=o.height/2-s.offsetHeight/2+"px",s.style.left=o.width/2-s.offsetWidth/2+"px";break;default:s.style.top=(n.pageY-o.top-s.offsetHeight/2-document.documentElement.scrollTop||document.body.scrollTop)+"px",s.style.left=(n.pageX-o.left-s.offsetWidth/2-document.documentElement.scrollLeft||document.body.scrollLeft)+"px"}return s.style.backgroundColor=r.color,s.className="waves-ripple z-active",!1}}return t[a]?t[a].removeHandle=n:t[a]={removeHandle:n},n}var i={bind:function(t,e){t.addEventListener("click",r(t,e),!1)},update:function(t,e){t.removeEventListener("click",t[a].removeHandle,!1),t.addEventListener("click",r(t,e),!1)},unbind:function(t){t.removeEventListener("click",t[a].removeHandle,!1),t[a]=null,delete t[a]}},o=function(t){t.directive("waves",i)};window.Vue&&(window.waves=i,Vue.use(o)),i.install=o;e["a"]=i},7179:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("div",{staticClass:"filter-container",staticStyle:{"margin-bottom":"10px"}},[n("el-input",{staticClass:"filter-item",attrs:{type:"number",placeholder:"ID"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleFilter(e)}},model:{value:t.listQuery.id,callback:function(e){t.$set(t.listQuery,"id",e)},expression:"listQuery.id"}}),n("el-input",{staticClass:"filter-item",attrs:{placeholder:"Name"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleFilter(e)}},model:{value:t.listQuery.name,callback:function(e){t.$set(t.listQuery,"name",e)},expression:"listQuery.name"}}),n("el-select",{staticClass:"filter-item",attrs:{placeholder:"Status",clearable:""},model:{value:t.listQuery.status,callback:function(e){t.$set(t.listQuery,"status",e)},expression:"listQuery.status"}},t._l(t.statusList,(function(t){return n("el-option",{key:t.name,attrs:{label:t.name,value:t.name}})})),1),n("el-select",{staticClass:"filter-item",attrs:{placeholder:"Type",clearable:""},model:{value:t.listQuery.type,callback:function(e){t.$set(t.listQuery,"type",e)},expression:"listQuery.type"}},t._l(t.typeList,(function(t){return n("el-option",{key:t.name,attrs:{label:t.name,value:t.name}})})),1),n("el-select",{staticClass:"filter-item",attrs:{placeholder:"Tag",clearable:""},model:{value:t.listQuery.tag,callback:function(e){t.$set(t.listQuery,"tag",e)},expression:"listQuery.tag"}},t._l(t.tagList,(function(t){return n("el-option",{key:t.id,attrs:{label:t.name,value:t.code}})})),1),n("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(e){return e.stopPropagation(),t.handleFilter(e)}}},[t._v(" Search ")]),n("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:function(e){return e.stopPropagation(),t.handleCreate(e)}}},[t._v(" Create ")])],1),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],key:t.tableKey,staticStyle:{width:"100%"},attrs:{data:t.list,border:"",fit:"","highlight-current-row":""},on:{"sort-change":t.sortChange}},[n("el-table-column",{attrs:{label:"ID",prop:"id",sortable:"custom",align:"center",width:"80","class-name":t.getSortClass("id")},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[n("span",[t._v(t._s(a.id))])]}}])}),n("el-table-column",{attrs:{label:"Code",width:"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[n("span",[t._v(t._s(a.code))])]}}])}),n("el-table-column",{attrs:{label:"Name","min-width":"150",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[n("router-link",{staticClass:"link-type",attrs:{to:t.getRoutePath(a)}},[t._v(t._s(a.name))])]}}])}),n("el-table-column",{attrs:{label:"Description","min-width":"200",align:"left"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[n("span",[t._v(t._s(a.description))])]}}])}),n("el-table-column",{attrs:{label:"Crontab","min-width":"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[n("span",[t._v(t._s(a.cronExpr))])]}}])}),n("el-table-column",{attrs:{label:"Tag","min-width":"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[n("span",[t._v(t._s(a.tags))])]}}])}),n("el-table-column",{attrs:{label:"Status",width:"120",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[n("el-tag",{attrs:{type:t._f("statusFilter")(a.status)}},[t._v(" "+t._s(a.status)+" ")])]}}])}),n("el-table-column",{attrs:{label:"Notify",width:"120",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[t._v(" "+t._s(n.alerts?n.alerts.map((function(t){return t.alertId})):"")+" ")]}}])}),n("el-table-column",{attrs:{label:"Update Time","min-width":"130",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[t._v(" "+t._s(n.updateTime)+" ")]}}])}),n("el-table-column",{attrs:{label:"Create Time","min-width":"130",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[t._v(" "+t._s(n.createTime)+" ")]}}])}),n("el-table-column",{attrs:{label:"Actions",align:"center",width:"230","class-name":"small-padding fixed-width"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row,r=e.$index;return[n("el-button",{attrs:{type:"primary",size:"mini",disabled:"SCHEDULING"===a.status},on:{click:function(e){return t.handleUpdate(a)}}},[t._v(" Edit ")]),n("el-dropdown",{staticStyle:{margin:"0 10px"},attrs:{trigger:"click"},on:{command:t.handleMore}},[n("el-button",{attrs:{size:"mini",type:"success"}},[t._v(" Action ")]),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{attrs:{command:{row:a,toStatus:"ALERT"}}},[t._v("Edit Alert")]),n("el-dropdown-item",{attrs:{command:{row:a,toStatus:"TAG"}}},[t._v("Edit Tag")]),n("el-dropdown-item",{attrs:{command:{row:a,toStatus:"COPY"}}},[t._v("Copy Workflow")]),"ONLINE"===a.status?n("el-dropdown-item",{attrs:{command:{row:a,toStatus:"SCHEDULING"}}},[t._v("Scheduling")]):t._e(),"SCHEDULING"===a.status?n("el-dropdown-item",{attrs:{command:{row:a,toStatus:"STOP_SCHED"}}},[t._v("Stop Sched")]):t._e(),"OFFLINE"===a.status?n("el-dropdown-item",{attrs:{command:{row:a,toStatus:"ONLINE"}}},[t._v("Online")]):t._e(),"JOB_FLOW"===a.type&&"ONLINE"===a.status?n("el-dropdown-item",{attrs:{command:{row:a,toStatus:"OFFLINE"}}},[t._v("Offline")]):t._e(),"JOB_FLOW"!==a.type||"ONLINE"!==a.status&&"SCHEDULING"!==a.status?t._e():n("el-dropdown-item",{attrs:{command:{row:a,toStatus:"RUN_ONCE"}}},[t._v("Run Once")])],1)],1),"DELETE"!==a.status?n("el-button",{attrs:{size:"mini",type:"danger",disabled:"SCHEDULING"===a.status},on:{click:function(e){return t.handleDelete(a,r)}}},[t._v(" Delete ")]):t._e(),"DELETE"===a.status?n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(e){return t.handlePurge(a,r)}}},[t._v(" Purge ")]):t._e()]}}])})],1),n("pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total > 0"}],attrs:{total:t.total,page:t.listQuery.page,limit:t.listQuery.size},on:{"update:page":function(e){return t.$set(t.listQuery,"page",e)},"update:limit":function(e){return t.$set(t.listQuery,"size",e)},pagination:t.getList}}),n("ProjectCreateDialog",{ref:"createDialog",on:{refreshList:t.getList}}),n("ScheduleDialog",{ref:"scheduleDialog",on:{refreshList:t.getList}}),n("EditAlertDialog",{ref:"editAlertDialog"}),n("EditTagDialog",{ref:"editTagDialog"})],1)},r=[],i=n("c7eb"),o=n("1da1"),s=(n("99af"),n("4e82"),n("a434"),n("b0c0"),n("7647")),l=n("7fbc"),u=n("d28d"),c=n("6724"),d=n("333d"),f=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-dialog",{attrs:{title:"Edit Project","show-close":!1,"close-on-click-modal":!1,"close-on-press-escape":!1,visible:t.visible},on:{"update:visible":function(e){t.visible=e}}},[n("el-form",{ref:"formData",attrs:{model:t.formData,rules:t.formRules}},[n("el-form-item",{attrs:{label:"Project Name",prop:"name","label-width":t.labelWidth}},[n("el-input",{staticStyle:{width:"90%"},model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData.name"}})],1),n("el-form-item",{attrs:{label:"Project Type",prop:"type","label-width":t.labelWidth}},[n("el-select",{staticStyle:{width:"90%"},attrs:{placeholder:"workflow type"},model:{value:t.formData.type,callback:function(e){t.$set(t.formData,"type",e)},expression:"formData.type"}},t._l(t.jobFlowTypes,(function(t){return n("el-option",{key:t.name,attrs:{label:t.name,value:t.name}})})),1)],1),t.formData.type&&"JOB_FLOW"===t.formData.type?[n("el-form-item",{attrs:{label:"Crontab",prop:"cronExpr","label-width":t.labelWidth}},[n("el-input",{staticStyle:{width:"90%"},model:{value:t.formData.cronExpr,callback:function(e){t.$set(t.formData,"cronExpr",e)},expression:"formData.cronExpr"}})],1),n("el-form-item",{attrs:{label:"Parallel Tasks",prop:"parallelism","label-width":t.labelWidth}},[n("el-input",{staticStyle:{width:"90%"},attrs:{type:"number",min:"1"},model:{value:t.formData.config.parallelism,callback:function(e){t.$set(t.formData.config,"parallelism",e)},expression:"formData.config.parallelism"}})],1),n("el-form-item",{attrs:{label:"Timeout",prop:"timeout","label-width":t.labelWidth}},[n("el-switch",{staticStyle:{width:"6%"},model:{value:t.formData.timeout.enable,callback:function(e){t.$set(t.formData.timeout,"enable",e)},expression:"formData.timeout.enable"}}),n("el-select",{staticStyle:{width:"40%","margin-left":"2%"},attrs:{placeholder:"timeout strategies",multiple:"",clearable:""},model:{value:t.formData.timeout.strategies,callback:function(e){t.$set(t.formData.timeout,"strategies",e)},expression:"formData.timeout.strategies"}},t._l(t.timeoutStrategies,(function(t){return n("el-option",{key:t.name,attrs:{label:t.name,value:t.name}})})),1),n("el-input",{staticStyle:{width:"40%","margin-left":"2%"},attrs:{placeholder:"Unit: s sec, m min, h hour, d day"},model:{value:t.formData.timeout.threshold,callback:function(e){t.$set(t.formData.timeout,"threshold",e)},expression:"formData.timeout.threshold"}})],1)]:t._e(),n("el-form-item",{attrs:{label:"Description",prop:"description","label-width":t.labelWidth}},[n("el-input",{staticStyle:{width:"90%"},attrs:{type:"textarea",autosize:{minRows:2,maxRows:4}},model:{value:t.formData.description,callback:function(e){t.$set(t.formData,"description",e)},expression:"formData.description"}})],1)],2),t.cronList&&t.cronList.length>0?n("el-table",{staticStyle:{width:"90%","padding-left":"120px"},attrs:{data:t.cronList}},[n("el-table-column",{attrs:{label:"Execution Time",align:"left"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[n("span",[t._v(t._s(a))])]}}],null,!1,2564006570)})],1):t._e(),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){return e.stopPropagation(),t.cancelForm()}}},[t._v("Cancel")]),t.formData.type&&"JOB_FLOW"===t.formData.type?[n("el-button",{attrs:{type:"warning"},on:{click:function(e){return e.stopPropagation(),t.getCrontab()}}},[t._v("CronTab")]),n("el-button",{attrs:{type:"success"},on:{click:function(e){return e.stopPropagation(),t.enterJobFlow()}}},[t._v("Edit Workflow")])]:t._e(),n("el-button",{attrs:{type:"primary"},on:{click:function(e){return e.stopPropagation(),t.submitForm()}}},[t._v("Confirm")])],2)],1)},m=[],p=(n("a4d3"),n("e01a"),{name:"ProjectCreateDialog",data:function(){return{visible:!1,labelWidth:"120px",timeoutStrategies:[],jobFlowTypes:[],cronList:[],formData:{timeout:{enable:!1},config:{}},formRules:{name:[{required:!0,message:"Please enter name",trigger:"blur"}],type:[{required:!0,message:"Please select workflow type",trigger:"blur"}]}}},methods:{init:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.resetForm(),this.getTimeoutStrategies(),this.getJobFlowTypes(),this.visible=!0;var e=t.id,n=t.name,a=t.type,r=t.cronExpr,i=t.description,o=t.timeout,s=t.config;o||(o={enable:!1}),s||(s={}),this.formData={id:e,name:n,type:a,cronExpr:r,description:i,timeout:o,config:s}},getTimeoutStrategies:function(){var t=this,e={className:"TimeoutStrategy"};Object(l["g"])(e).then((function(e){t.timeoutStrategies=e}))},getJobFlowTypes:function(){var t=this,e={className:"JobFlowType"};Object(l["g"])(e).then((function(e){t.jobFlowTypes=e}))},getCrontab:function(){var t=this;Object(s["h"])({cron:this.formData.cronExpr}).then((function(e){t.cronList=e}))},submitForm:function(){var t=this;this.formData.id?Object(s["m"])(this.formData).then((function(e){t.visible=!1,t.$emit("refreshList")})):this.$refs.formData.validate((function(e){if(!e)return!1;Object(s["b"])(t.formData).then((function(e){t.visible=!1,t.$emit("refreshList")}))}))},enterJobFlow:function(){var t=this.formData.id;t&&(this.visible=!1,this.$router.push("/project/flow/edit/".concat(t)))},cancelForm:function(){this.visible=!1,this.resetForm()},resetForm:function(){this.$refs.formData?(this.$refs.formData.clearValidate(),this.$refs.formData.resetFields()):this.formData={timeout:{enable:!1},config:{}}}}}),h=p,b=n("2877"),g=Object(b["a"])(h,f,m,!1,null,null,null),v=g.exports,y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-dialog",{attrs:{title:"Scheduling",width:"30%","destroy-on-close":!0,visible:t.visible},on:{"update:visible":function(e){t.visible=e}}},[n("el-form",{attrs:{disabled:!0}},[n("el-form-item",{attrs:{label:"CronTab",prop:"cronExpr","label-width":t.labelWidth}},[n("el-input",{staticStyle:{width:"90%"},model:{value:t.row.cronExpr,callback:function(e){t.$set(t.row,"cronExpr",e)},expression:"row.cronExpr"}})],1)],1),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){return t.closeForm()}}},[t._v("Cancel")]),n("el-button",{attrs:{type:"warning"},on:{click:function(e){return e.stopPropagation(),t.getCrontab()}}},[t._v("CronTab")]),n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitForm()}}},[t._v(" Confirm ")]),t.cronList&&t.cronList.length>0?n("el-table",{attrs:{data:t.cronList}},[n("el-table-column",{attrs:{label:"Execution Time",align:"left"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[n("span",[t._v(t._s(a))])]}}],null,!1,145018682)})],1):t._e()],1)],1)},w=[],O={name:"ScheduleDialog",data:function(){return{visible:!1,labelWidth:"100px",listStatus:[],row:{},cronList:[]}},created:function(){this.getStatus()},methods:{init:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.row=t,this.cronList=[],this.visible=!0},getStatus:function(){var t=this,e={className:"JobFlowStatus"};Object(l["g"])(e).then((function(e){t.listStatus=e}))},getCrontab:function(){var t=this;Object(s["h"])({cron:this.row.cronExpr}).then((function(e){t.cronList=e}))},submitForm:function(){var t=this;return Object(o["a"])(Object(i["a"])().mark((function e(){return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(s["k"])(t.row.id).then((function(e){t.$message.success("Scheduled Successfully, id=".concat(e)),t.closeForm(),t.$emit("refreshList")}));case 2:case"end":return e.stop()}}),e)})))()},closeForm:function(){this.visible=!1}}},j=O,_=Object(b["a"])(j,y,w,!1,null,null,null),D=_.exports,k=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-dialog",{attrs:{title:"Alert Configuration",visible:t.visible},on:{"update:visible":function(e){t.visible=e}}},[n("el-form",{attrs:{model:t.formData,rules:t.formRules}},[t._l(t.formData.alerts,(function(e,a){return[n("el-row",{key:"r"+a,attrs:{gutter:20}},[n("el-col",{attrs:{span:10}},[n("el-form-item",{attrs:{label:"Alert"+a,prop:"alerts."+a+".alertId","label-width":"100px"}},[n("el-select",{staticStyle:{width:"100%"},model:{value:e.alertId,callback:function(n){t.$set(e,"alertId",n)},expression:"rowItem.alertId"}},t._l(t.alertList,(function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}},[n("span",{staticStyle:{float:"left"}},[t._v(t._s(e.name))])])})),1)],1)],1),n("el-col",{attrs:{span:10}},[n("el-form-item",{attrs:{prop:"alerts."+a+".statuses"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{multiple:""},model:{value:e.statuses,callback:function(n){t.$set(e,"statuses",n)},expression:"rowItem.statuses"}},t._l(t.statusList,(function(e){return n("el-option",{key:e.name,attrs:{label:e.name,value:e.name}},[n("span",{staticStyle:{float:"left"}},[t._v(t._s(e.name))])])})),1)],1)],1),n("el-col",{attrs:{span:1}},[n("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(n){return n.preventDefault(),t.deleteAlert(e)}}})],1)],1)]})),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:22}},[n("el-form-item",{staticStyle:{"text-align":"right"}},[n("el-button",{on:{click:function(e){return e.stopPropagation(),t.cancelForm(e)}}},[t._v("Cancel")]),n("el-button",{attrs:{type:"success"},on:{click:function(e){return e.stopPropagation(),t.addAlert(e)}}},[t._v("Add One")]),n("el-button",{attrs:{type:"primary"},on:{click:function(e){return e.stopPropagation(),t.submitForm(e)}}},[t._v("Confirm")])],1)],1)],1)],2)],1)},S=[],x=n("a81a"),L={name:"EditAlertDialog",data:function(){return{visible:!1,row:{},formData:{},alertList:[],statusList:[],formRules:{}}},methods:{init:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.resetForm(),this.initAlertList(),this.initStatusList(),this.row=t;var e=t.id,n=t.alerts;this.formData={id:e,alerts:n},this.visible=!0},initAlertList:function(){var t=this;Object(x["d"])().then((function(e){t.alertList=e}))},initStatusList:function(){var t=this,e={className:"ExecutionStatus"};Object(l["g"])(e).then((function(e){t.statusList=e}))},addAlert:function(){this.formData.alerts||(this.formData.alerts=[]),this.formData.alerts.push({alertId:null,statuses:[]})},deleteAlert:function(t){var e=this.formData.alerts.indexOf(t);-1!==e&&this.formData.alerts.splice(e,1)},submitForm:function(){var t=this;Object(s["m"])(this.formData).then((function(e){t.row.alerts=t.formData.alerts,t.cancelForm()}))},cancelForm:function(){this.visible=!1,this.resetForm()},resetForm:function(){this.$refs.formData?(this.$refs.formData.clearValidate(),this.$refs.formData.resetFields()):this.formData={}}}},E=L,F=Object(b["a"])(E,k,S,!1,null,null,null),C=F.exports,T=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-dialog",{attrs:{title:"Tag Configuration",visible:t.visible,width:"40%"},on:{"update:visible":function(e){t.visible=e}}},[n("el-form",{attrs:{model:t.formData}},[n("el-form-item",[n("el-select",{staticStyle:{width:"100%"},attrs:{multiple:""},model:{value:t.formData.tags,callback:function(e){t.$set(t.formData,"tags",e)},expression:"formData.tags"}},t._l(t.tagList,(function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.code}},[n("span",{staticStyle:{float:"left"}},[t._v(t._s(e.name))])])})),1)],1),n("el-form-item",{staticStyle:{"text-align":"right"}},[n("el-button",{on:{click:function(e){return e.stopPropagation(),t.cancelForm()}}},[t._v("Cancel")]),n("el-button",{attrs:{type:"primary"},on:{click:function(e){return e.stopPropagation(),t.submitForm()}}},[t._v("Confirm")])],1)],1)],1)},$=[],N={name:"EditTagDialog",data:function(){return{visible:!1,row:{},formData:{},tagList:[]}},methods:{init:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.row=e;var n=e.id,a=e.tags;this.formData={id:n,tags:a},Object(u["d"])().then((function(e){t.tagList=e,t.visible=!0}))},submitForm:function(){var t=this;Object(s["m"])(this.formData).then((function(e){t.row.tags=t.formData.tags,t.cancelForm()}))},cancelForm:function(){this.visible=!1,this.resetForm()},resetForm:function(){this.formData={}}}},P=N,I=Object(b["a"])(P,T,$,!1,null,null,null),A=I.exports,z={name:"ProjectList",components:{Pagination:d["a"],ProjectCreateDialog:v,ScheduleDialog:D,EditAlertDialog:C,EditTagDialog:A},directives:{waves:c["a"]},filters:{statusFilter:function(t){var e={OFFLINE:"info",ONLINE:"",SCHEDULING:"success",DELETE:"danger"};return e[t]}},data:function(){return{statusList:[],tagList:[],typeList:[],tableKey:0,list:null,total:0,listLoading:!0,listQuery:{page:1,size:20,id:null,name:void 0,type:void 0,status:void 0,sort:"-id"}}},created:function(){this.getStatus(),this.getTags(),this.getTypes(),this.getList()},methods:{getTags:function(){var t=this;Object(u["d"])().then((function(e){t.tagList=e}))},getTypes:function(){var t=this,e={className:"JobFlowType"};Object(l["g"])(e).then((function(e){t.typeList=e}))},getStatus:function(){var t=this,e={className:"JobFlowStatus"};Object(l["g"])(e).then((function(e){t.statusList=e}))},getList:function(){var t=this;this.listLoading=!0,Object(s["e"])(this.listQuery).then((function(e){t.list=e.records,t.total=e.total,setTimeout((function(){t.listLoading=!1}),200)}))},getRoutePath:function(t){return"JOB_LIST"===t.type?"/project/list/"+t.id:("SCHEDULING"===t.status?"/project/flow/show/":"/project/flow/edit/")+t.id},handleFilter:function(){this.listQuery.page=1,this.getList()},handleMore:function(t){var e=this;return Object(o["a"])(Object(i["a"])().mark((function n(){var a,r,o;return Object(i["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(a=t.row,r=t.toStatus,"ALERT"!==r){n.next=4;break}return e.$refs.editAlertDialog.init(a),n.abrupt("return");case 4:if("TAG"!==r){n.next=7;break}return e.$refs.editTagDialog.init(a),n.abrupt("return");case 7:if("COPY"!==r){n.next=10;break}return Object(s["a"])(a.id).then((function(t){e.getList()})),n.abrupt("return");case 10:if("DELETE_FLOW"!==r){n.next=12;break}return n.abrupt("return");case 12:if(r!==a.status){n.next=14;break}return n.abrupt("return");case 14:"SCHEDULING"===r?e.$refs.scheduleDialog.init(a):"STOP_SCHED"===r?Object(s["l"])(a.id).then((function(t){e.getList()})):"RUN_ONCE"===r?Object(s["j"])(a.id).then((function(t){e.$message({message:"Run once Successfully, id="+t,type:"success"})})):(o={id:a.id,status:r},Object(s["m"])(o).then((function(t){a.status=r})));case 15:case"end":return n.stop()}}),n)})))()},sortChange:function(t){var e=t.prop,n=t.order;"id"===e&&this.sortByID(n)},sortByID:function(t){this.listQuery.sort="ascending"===t?"+id":"-id",this.handleFilter()},handleCreate:function(){this.$refs.createDialog.init()},handleUpdate:function(t){var e=Object.assign({},t);this.$refs.createDialog.init(e)},handleDelete:function(t,e){var n=this;this.$confirm("Delete project [".concat(t.id,", ").concat(t.name,"] ?"),"Warning",{confirmButtonText:"Confirm",cancelButtonText:"Cancel",type:"warning"}).then((function(){Object(s["m"])({id:t.id,status:"DELETE"}).then((function(t){n.$message({message:"Delete successfully, id="+t,type:"success"}),n.list.splice(e,1)}))}))},handlePurge:function(t,e){var n=this;this.$confirm("Purge project [".concat(t.id,", ").concat(t.name,"] ?"),"Warning",{confirmButtonText:"Confirm",cancelButtonText:"Cancel",type:"warning"}).then((function(){Object(s["i"])(t.id).then((function(t){n.$message({message:"Purge forever successfully, id="+t,type:"success"}),n.list.splice(e,1)}))}))},getSortClass:function(t){var e=this.listQuery.sort;return e==="+".concat(t)?"ascending":"descending"}}},Q=z,R=(n("0093"),Object(b["a"])(Q,a,r,!1,null,"184c3c90",null));e["default"]=R.exports},"73e0":function(t,e,n){},7647:function(t,e,n){"use strict";n.d(e,"e",(function(){return o})),n.d(e,"c",(function(){return s})),n.d(e,"b",(function(){return c})),n.d(e,"m",(function(){return d})),n.d(e,"o",(function(){return m})),n.d(e,"i",(function(){return h})),n.d(e,"a",(function(){return b})),n.d(e,"j",(function(){return g})),n.d(e,"l",(function(){return v})),n.d(e,"k",(function(){return y})),n.d(e,"f",(function(){return w})),n.d(e,"n",(function(){return _})),n.d(e,"d",(function(){return k})),n.d(e,"g",(function(){return x})),n.d(e,"h",(function(){return L}));var a=n("c7eb"),r=n("1da1"),i=n("b775");function o(t){return Object(i["a"])({url:"/jobFlow/page",method:"get",params:t}).then((function(t){return t.data}))}function s(t){return Object(i["a"])({url:"/jobFlow/idNameMapList",method:"get",params:t}).then((function(t){return t.data}))}function l(t){return u.apply(this,arguments)}function u(){return u=Object(r["a"])(Object(a["a"])().mark((function t(e){return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(i["a"])({url:"/jobFlow/get/".concat(e),method:"get"}).then((function(t){return t.data})));case 1:case"end":return t.stop()}}),t)}))),u.apply(this,arguments)}function c(t){return Object(i["a"])({url:"/jobFlow/create",method:"post",data:t}).then((function(t){return t.data}))}function d(t){return f.apply(this,arguments)}function f(){return f=Object(r["a"])(Object(a["a"])().mark((function t(e){return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(i["a"])({url:"/jobFlow/update",method:"post",data:e}).then((function(t){return t.data})));case 1:case"end":return t.stop()}}),t)}))),f.apply(this,arguments)}function m(t){return p.apply(this,arguments)}function p(){return p=Object(r["a"])(Object(a["a"])().mark((function t(e){return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(i["a"])({url:"/jobFlow/updateFlow",method:"post",data:e}).then((function(t){return t.data})));case 1:case"end":return t.stop()}}),t)}))),p.apply(this,arguments)}function h(t){return Object(i["a"])({url:"/jobFlow/purge/".concat(t),method:"get"}).then((function(t){return t.data}))}function b(t){return Object(i["a"])({url:"/jobFlow/copy/".concat(t),method:"get"}).then((function(t){return t.data}))}function g(t,e){return Object(i["a"])({url:"/jobFlow/schedule/runOnce/".concat(t),method:"post",data:e}).then((function(t){return t.data}))}function v(t){return Object(i["a"])({url:"/jobFlow/schedule/stop/".concat(t),method:"get"}).then((function(t){return t.data}))}function y(t){return Object(i["a"])({url:"/jobFlow/schedule/start/".concat(t),method:"get"}).then((function(t){return t.data}))}function w(t){return Object(i["a"])({url:"/jobFlowRun/page",method:"get",params:t}).then((function(t){return t.data}))}function O(t){return j.apply(this,arguments)}function j(){return j=Object(r["a"])(Object(a["a"])().mark((function t(e){return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(i["a"])({url:"/jobFlowRun/get/".concat(e),method:"get"}).then((function(t){return t.data})));case 1:case"end":return t.stop()}}),t)}))),j.apply(this,arguments)}function _(t){return D.apply(this,arguments)}function D(){return D=Object(r["a"])(Object(a["a"])().mark((function t(e){return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(i["a"])({url:"/jobFlowRun/update",method:"post",data:e}).then((function(t){return t.data})));case 1:case"end":return t.stop()}}),t)}))),D.apply(this,arguments)}function k(t,e){return S.apply(this,arguments)}function S(){return S=Object(r["a"])(Object(a["a"])().mark((function t(e,n){return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return","instance"!==n?l(e):O(e));case 1:case"end":return t.stop()}}),t)}))),S.apply(this,arguments)}function x(t){return Object(i["a"])({url:"/jobFlowRun/kill/".concat(t),method:"get"}).then((function(t){return t.data}))}function L(t){return Object(i["a"])({url:"/quartz/parseExpr",method:"get",params:t}).then((function(t){return t.data}))}},"7fbc":function(t,e,n){"use strict";n.d(e,"c",(function(){return o})),n.d(e,"e",(function(){return s})),n.d(e,"d",(function(){return l})),n.d(e,"b",(function(){return c})),n.d(e,"g",(function(){return d})),n.d(e,"h",(function(){return f})),n.d(e,"f",(function(){return m})),n.d(e,"a",(function(){return p}));var a=n("c7eb"),r=n("1da1"),i=n("b775");function o(t){return Object(i["a"])({url:"/attr/edgeStates?jobId=".concat(t),method:"get"}).then((function(t){return t.data}))}function s(t){return Object(i["a"])({url:"/attr/nodeTypes?type=".concat(t),method:"get"}).then((function(t){return t.data}))}function l(t){return u.apply(this,arguments)}function u(){return u=Object(r["a"])(Object(a["a"])().mark((function t(e){return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(i["a"])({url:"/attr/nodeClassification?jobType=".concat(e),method:"get"}).then((function(t){return t.data}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),u.apply(this,arguments)}function c(t){return Object(i["a"])({url:"/attr/deployModes?type=".concat(t),method:"get"}).then((function(t){return t.data}))}function d(t){return Object(i["a"])({url:"/attr/enums",method:"get",params:t}).then((function(t){return t.data}))}function f(t){return Object(i["a"])({url:"/attr/versions?type=".concat(t),method:"get"}).then((function(t){return t.data}))}function m(){return Object(i["a"])({url:"/attr/preconditions",method:"get"}).then((function(t){return t.data}))}function p(){return Object(i["a"])({url:"/attr/dependentRelations",method:"get"}).then((function(t){return t.data}))}},"8d41":function(t,e,n){},a434:function(t,e,n){"use strict";var a=n("23e7"),r=n("23cb"),i=n("a691"),o=n("50c4"),s=n("7b0b"),l=n("65f0"),u=n("8418"),c=n("1dde"),d=n("ae40"),f=c("splice"),m=d("splice",{ACCESSORS:!0,0:0,1:2}),p=Math.max,h=Math.min,b=9007199254740991,g="Maximum allowed length exceeded";a({target:"Array",proto:!0,forced:!f||!m},{splice:function(t,e){var n,a,c,d,f,m,v=s(this),y=o(v.length),w=r(t,y),O=arguments.length;if(0===O?n=a=0:1===O?(n=0,a=y-w):(n=O-2,a=h(p(i(e),0),y-w)),y+n-a>b)throw TypeError(g);for(c=l(v,a),d=0;d<a;d++)f=w+d,f in v&&u(c,d,v[f]);if(c.length=a,n<a){for(d=w;d<y-a;d++)f=d+a,m=d+n,f in v?v[m]=v[f]:delete v[m];for(d=y;d>y-a+n;d--)delete v[d-1]}else if(n>a)for(d=y-a;d>w;d--)f=d+a-1,m=d+n-1,f in v?v[m]=v[f]:delete v[m];for(d=0;d<n;d++)v[d+w]=arguments[d+2];return v.length=y-a+n,c}})},a81a:function(t,e,n){"use strict";n.d(e,"c",(function(){return r})),n.d(e,"e",(function(){return i})),n.d(e,"d",(function(){return o})),n.d(e,"a",(function(){return s})),n.d(e,"f",(function(){return l})),n.d(e,"b",(function(){return u}));var a=n("b775");function r(t){return Object(a["a"])({url:"/alert/get/".concat(t),method:"get"}).then((function(t){return t.data}))}function i(t){return Object(a["a"])({url:"/alert/page",method:"get",params:t}).then((function(t){return t.data}))}function o(){return Object(a["a"])({url:"/alert/list",method:"get"}).then((function(t){return t.data}))}function s(t){return Object(a["a"])({url:"/alert/create",method:"post",data:t}).then((function(t){return t.data}))}function l(t){return Object(a["a"])({url:"/alert/update",method:"post",data:t}).then((function(t){return t.data}))}function u(t){return Object(a["a"])({url:"/alert/delete/".concat(t),method:"get"}).then((function(t){return t.data}))}},d28d:function(t,e,n){"use strict";n.d(e,"c",(function(){return r})),n.d(e,"e",(function(){return i})),n.d(e,"d",(function(){return o})),n.d(e,"a",(function(){return s})),n.d(e,"f",(function(){return l})),n.d(e,"b",(function(){return u}));var a=n("b775");function r(t){return Object(a["a"])({url:"/tag/get/".concat(t),method:"get"}).then((function(t){return t.data}))}function i(t){return Object(a["a"])({url:"/tag/page",method:"get",params:t}).then((function(t){return t.data}))}function o(t){return Object(a["a"])({url:"/tag/list",method:"get",params:t}).then((function(t){return t.data}))}function s(t){return Object(a["a"])({url:"/tag/create",method:"post",data:t}).then((function(t){return t.data}))}function l(t){return Object(a["a"])({url:"/tag/update",method:"post",data:t}).then((function(t){return t.data}))}function u(t){return Object(a["a"])({url:"/tag/delete/".concat(t),method:"get"}).then((function(t){return t.data}))}}}]);